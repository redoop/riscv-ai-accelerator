<!DOCTYPE html>
<html>
<head>
    <title>RTL波形查看器 - tpu_controller_cache_test.vcd</title>
    <meta charset="UTF-8">
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            margin: 0; 
            padding: 20px; 
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
        }
        .container { 
            max-width: 1600px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header { 
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white; 
            padding: 25px; 
            text-align: center;
        }
        .header h1 { margin: 0; font-size: 2.5em; }
        .controls { 
            background: #f8f9fa; 
            padding: 20px; 
            border-bottom: 1px solid #dee2e6;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        .control-group { 
            display: flex; 
            align-items: center; 
            gap: 10px;
        }
        .control-group label { 
            font-weight: bold; 
            color: #495057;
        }
        .control-group input, .control-group select { 
            padding: 8px 12px; 
            border: 1px solid #ced4da; 
            border-radius: 5px;
            font-size: 14px;
        }
        .btn { 
            padding: 10px 20px; 
            background: #1e3c72; 
            color: white; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s;
        }
        .btn:hover { background: #2a5298; }
        .btn.secondary { background: #6c757d; }
        .btn.secondary:hover { background: #545b62; }
        .signal-category { 
            margin: 20px; 
            border: 1px solid #dee2e6; 
            border-radius: 8px;
            overflow: hidden;
        }
        .category-header { 
            background: #e9ecef; 
            padding: 15px; 
            font-weight: bold; 
            color: #2c3e50;
            border-bottom: 1px solid #dee2e6;
        }
        .signal-row { 
            display: flex; 
            align-items: center; 
            padding: 10px 15px; 
            border-bottom: 1px solid #f8f9fa;
        }
        .signal-row:hover { background: #f8f9fa; }
        .signal-name { 
            width: 200px; 
            font-weight: bold; 
            color: #2c3e50;
            font-family: monospace;
        }
        .signal-canvas { 
            flex: 1; 
            height: 60px; 
            border: 1px solid #dee2e6; 
            border-radius: 5px;
            background: white;
            margin: 0 10px;
        }
        .signal-info { 
            width: 150px; 
            font-size: 12px; 
            color: #6c757d;
            text-align: right;
        }
        .timeline { 
            height: 40px; 
            background: #2c3e50; 
            color: white; 
            display: flex; 
            align-items: center; 
            padding: 0 20px;
            font-family: monospace;
            font-size: 14px;
        }
        .stats { 
            background: #e9ecef; 
            padding: 20px; 
            border-top: 1px solid #dee2e6;
        }
        .stats-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
            gap: 15px;
        }
        .stat-card { 
            background: white; 
            padding: 15px; 
            border-radius: 8px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .stat-card h4 { 
            margin: 0 0 10px 0; 
            color: #2c3e50;
        }
        .stat-value { 
            font-size: 1.5em; 
            font-weight: bold; 
            color: #1e3c72;
        }
        .clock { color: #e74c3c; }
        .control { color: #f39c12; }
        .data { color: #3498db; }
        .status { color: #27ae60; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🌊 RTL波形查看器</h1>
            <p>文件: tpu_controller_cache_test.vcd | 大小: 8852 bytes</p>
            <p>RTL模块: TPU/VPU AI加速器</p>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label>时间范围:</label>
                <input type="number" id="timeStart" value="0" placeholder="开始时间(ps)">
                <span>-</span>
                <input type="number" id="timeEnd" value="1000000" placeholder="结束时间(ps)">
            </div>
            <div class="control-group">
                <label>缩放:</label>
                <select id="zoomLevel">
                    <option value="1">1x</option>
                    <option value="2">2x</option>
                    <option value="4">4x</option>
                    <option value="8">8x</option>
                    <option value="16">16x</option>
                </select>
            </div>
            <button class="btn" onclick="updateWaveforms()">🔄 更新波形</button>
            <button class="btn secondary" onclick="exportData()">💾 导出数据</button>
            <button class="btn secondary" onclick="analyzeSignals()">📊 信号分析</button>
        </div>
        
        <div class="timeline" id="timeline">
            时间轴将在这里显示
        </div>
        
        <div class="signal-category">
            <div class="category-header clock">🕐 时钟信号</div>
            <div id="clockSignals"></div>
        </div>
        
        <div class="signal-category">
            <div class="category-header control">🎛️ 控制信号</div>
            <div id="controlSignals"></div>
        </div>
        
        <div class="signal-category">
            <div class="category-header data">📊 数据信号</div>
            <div id="dataSignals"></div>
        </div>
        
        <div class="signal-category">
            <div class="category-header status">📈 状态信号</div>
            <div id="statusSignals"></div>
        </div>
        
        <div class="stats">
            <h3>📊 RTL波形统计信息</h3>
            <div class="stats-grid">
                <div class="stat-card">
                    <h4>时钟信号</h4>
                    <div class="stat-value" id="clockCount">2</div>
                </div>
                <div class="stat-card">
                    <h4>控制信号</h4>
                    <div class="stat-value" id="controlCount">4</div>
                </div>
                <div class="stat-card">
                    <h4>数据信号</h4>
                    <div class="stat-value" id="dataCount">7</div>
                </div>
                <div class="stat-card">
                    <h4>状态信号</h4>
                    <div class="stat-value" id="statusCount">21</div>
                </div>
                <div class="stat-card">
                    <h4>总信号数</h4>
                    <div class="stat-value">34</div>
                </div>
                <div class="stat-card">
                    <h4>文件大小</h4>
                    <div class="stat-value">8852 B</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // RTL波形数据
        const rtlData = {
  "clock_signals": [
    {
      "id": "#",
      "name": "CLK_PERIOD",
      "type": "parameter",
      "width": "32",
      "values": [
        [
          0,
          "0xa"
        ]
      ]
    },
    {
      "id": ".",
      "name": "clk",
      "type": "reg",
      "width": "1",
      "values": [
        [
          0,
          "0"
        ],
        [
          5000,
          "1"
        ],
        [
          10000,
          "0"
        ],
        [
          15000,
          "1"
        ],
        [
          20000,
          "0"
        ],
        [
          25000,
          "1"
        ],
        [
          30000,
          "0"
        ],
        [
          35000,
          "1"
        ],
        [
          40000,
          "0"
        ],
        [
          45000,
          "1"
        ],
        [
          50000,
          "0"
        ],
        [
          55000,
          "1"
        ],
        [
          60000,
          "0"
        ],
        [
          65000,
          "1"
        ],
        [
          70000,
          "0"
        ],
        [
          75000,
          "1"
        ],
        [
          80000,
          "0"
        ],
        [
          85000,
          "1"
        ],
        [
          90000,
          "0"
        ],
        [
          95000,
          "1"
        ],
        [
          100000,
          "0"
        ],
        [
          105000,
          "1"
        ],
        [
          110000,
          "0"
        ],
        [
          115000,
          "1"
        ],
        [
          120000,
          "0"
        ],
        [
          125000,
          "1"
        ],
        [
          130000,
          "0"
        ],
        [
          135000,
          "1"
        ],
        [
          140000,
          "0"
        ],
        [
          145000,
          "1"
        ],
        [
          150000,
          "0"
        ],
        [
          155000,
          "1"
        ],
        [
          160000,
          "0"
        ],
        [
          165000,
          "1"
        ],
        [
          170000,
          "0"
        ],
        [
          175000,
          "1"
        ],
        [
          180000,
          "0"
        ],
        [
          185000,
          "1"
        ],
        [
          190000,
          "0"
        ],
        [
          195000,
          "1"
        ],
        [
          200000,
          "0"
        ],
        [
          205000,
          "1"
        ],
        [
          210000,
          "0"
        ],
        [
          215000,
          "1"
        ],
        [
          220000,
          "0"
        ],
        [
          225000,
          "1"
        ],
        [
          230000,
          "0"
        ],
        [
          235000,
          "1"
        ],
        [
          240000,
          "0"
        ],
        [
          245000,
          "1"
        ],
        [
          250000,
          "0"
        ],
        [
          255000,
          "1"
        ],
        [
          260000,
          "0"
        ],
        [
          265000,
          "1"
        ],
        [
          270000,
          "0"
        ],
        [
          275000,
          "1"
        ],
        [
          280000,
          "0"
        ],
        [
          285000,
          "1"
        ],
        [
          290000,
          "0"
        ],
        [
          295000,
          "1"
        ],
        [
          300000,
          "0"
        ],
        [
          305000,
          "1"
        ],
        [
          310000,
          "0"
        ],
        [
          315000,
          "1"
        ],
        [
          320000,
          "0"
        ],
        [
          325000,
          "1"
        ],
        [
          330000,
          "0"
        ],
        [
          335000,
          "1"
        ],
        [
          340000,
          "0"
        ],
        [
          345000,
          "1"
        ],
        [
          350000,
          "0"
        ],
        [
          355000,
          "1"
        ],
        [
          360000,
          "0"
        ],
        [
          365000,
          "1"
        ],
        [
          370000,
          "0"
        ],
        [
          375000,
          "1"
        ],
        [
          380000,
          "0"
        ],
        [
          385000,
          "1"
        ],
        [
          390000,
          "0"
        ],
        [
          395000,
          "1"
        ],
        [
          400000,
          "0"
        ],
        [
          405000,
          "1"
        ],
        [
          410000,
          "0"
        ],
        [
          415000,
          "1"
        ],
        [
          420000,
          "0"
        ],
        [
          425000,
          "1"
        ],
        [
          430000,
          "0"
        ],
        [
          435000,
          "1"
        ],
        [
          440000,
          "0"
        ],
        [
          445000,
          "1"
        ],
        [
          450000,
          "0"
        ],
        [
          455000,
          "1"
        ],
        [
          460000,
          "0"
        ],
        [
          465000,
          "1"
        ],
        [
          470000,
          "0"
        ],
        [
          475000,
          "1"
        ],
        [
          480000,
          "0"
        ],
        [
          485000,
          "1"
        ],
        [
          490000,
          "0"
        ],
        [
          495000,
          "1"
        ],
        [
          500000,
          "0"
        ],
        [
          505000,
          "1"
        ],
        [
          510000,
          "0"
        ],
        [
          515000,
          "1"
        ],
        [
          520000,
          "0"
        ],
        [
          525000,
          "1"
        ],
        [
          530000,
          "0"
        ],
        [
          535000,
          "1"
        ],
        [
          540000,
          "0"
        ],
        [
          545000,
          "1"
        ],
        [
          550000,
          "0"
        ],
        [
          555000,
          "1"
        ],
        [
          560000,
          "0"
        ],
        [
          565000,
          "1"
        ],
        [
          570000,
          "0"
        ],
        [
          575000,
          "1"
        ],
        [
          580000,
          "0"
        ],
        [
          585000,
          "1"
        ],
        [
          590000,
          "0"
        ],
        [
          595000,
          "1"
        ],
        [
          600000,
          "0"
        ],
        [
          605000,
          "1"
        ],
        [
          610000,
          "0"
        ],
        [
          615000,
          "1"
        ],
        [
          620000,
          "0"
        ],
        [
          625000,
          "1"
        ],
        [
          630000,
          "0"
        ],
        [
          635000,
          "1"
        ],
        [
          640000,
          "0"
        ],
        [
          645000,
          "1"
        ],
        [
          650000,
          "0"
        ],
        [
          655000,
          "1"
        ],
        [
          660000,
          "0"
        ],
        [
          665000,
          "1"
        ],
        [
          670000,
          "0"
        ],
        [
          675000,
          "1"
        ],
        [
          680000,
          "0"
        ],
        [
          685000,
          "1"
        ],
        [
          690000,
          "0"
        ],
        [
          695000,
          "1"
        ],
        [
          700000,
          "0"
        ],
        [
          705000,
          "1"
        ],
        [
          710000,
          "0"
        ],
        [
          715000,
          "1"
        ],
        [
          720000,
          "0"
        ],
        [
          725000,
          "1"
        ],
        [
          730000,
          "0"
        ],
        [
          735000,
          "1"
        ],
        [
          740000,
          "0"
        ],
        [
          745000,
          "1"
        ],
        [
          750000,
          "0"
        ],
        [
          755000,
          "1"
        ],
        [
          760000,
          "0"
        ],
        [
          765000,
          "1"
        ],
        [
          770000,
          "0"
        ],
        [
          775000,
          "1"
        ],
        [
          780000,
          "0"
        ],
        [
          785000,
          "1"
        ],
        [
          790000,
          "0"
        ],
        [
          795000,
          "1"
        ],
        [
          800000,
          "0"
        ],
        [
          805000,
          "1"
        ],
        [
          810000,
          "0"
        ],
        [
          815000,
          "1"
        ],
        [
          820000,
          "0"
        ],
        [
          825000,
          "1"
        ],
        [
          830000,
          "0"
        ],
        [
          835000,
          "1"
        ],
        [
          840000,
          "0"
        ],
        [
          845000,
          "1"
        ],
        [
          850000,
          "0"
        ],
        [
          855000,
          "1"
        ],
        [
          860000,
          "0"
        ],
        [
          865000,
          "1"
        ],
        [
          870000,
          "0"
        ],
        [
          875000,
          "1"
        ],
        [
          880000,
          "0"
        ],
        [
          885000,
          "1"
        ],
        [
          890000,
          "0"
        ],
        [
          895000,
          "1"
        ],
        [
          900000,
          "0"
        ],
        [
          905000,
          "1"
        ],
        [
          910000,
          "0"
        ],
        [
          915000,
          "1"
        ],
        [
          920000,
          "0"
        ],
        [
          925000,
          "1"
        ],
        [
          930000,
          "0"
        ],
        [
          935000,
          "1"
        ],
        [
          940000,
          "0"
        ],
        [
          945000,
          "1"
        ],
        [
          950000,
          "0"
        ],
        [
          955000,
          "1"
        ],
        [
          960000,
          "0"
        ],
        [
          965000,
          "1"
        ],
        [
          970000,
          "0"
        ],
        [
          975000,
          "1"
        ],
        [
          980000,
          "0"
        ],
        [
          985000,
          "1"
        ],
        [
          990000,
          "0"
        ],
        [
          995000,
          "1"
        ],
        [
          1000000,
          "0"
        ],
        [
          1005000,
          "1"
        ]
      ]
    }
  ],
  "control_signals": [
    {
      "id": "(",
      "name": "cache_enable",
      "type": "reg",
      "width": "1",
      "values": [
        [
          0,
          "0"
        ],
        [
          175000,
          "1"
        ],
        [
          205000,
          "0"
        ],
        [
          225000,
          "1"
        ],
        [
          725000,
          "0"
        ],
        [
          745000,
          "1"
        ],
        [
          985000,
          "0"
        ]
      ]
    },
    {
      "id": "-",
      "name": "cache_write_enable",
      "type": "reg",
      "width": "1",
      "values": [
        [
          0,
          "0"
        ],
        [
          175000,
          "1"
        ],
        [
          185000,
          "0"
        ],
        [
          745000,
          "1"
        ],
        [
          755000,
          "1"
        ],
        [
          765000,
          "1"
        ],
        [
          775000,
          "1"
        ],
        [
          785000,
          "1"
        ],
        [
          795000,
          "1"
        ],
        [
          805000,
          "1"
        ],
        [
          815000,
          "1"
        ],
        [
          825000,
          "1"
        ],
        [
          835000,
          "1"
        ],
        [
          845000,
          "0"
        ]
      ]
    },
    {
      "id": "0",
      "name": "controller_enable",
      "type": "reg",
      "width": "1",
      "values": [
        [
          0,
          "0"
        ],
        [
          75000,
          "1"
        ],
        [
          155000,
          "0"
        ],
        [
          745000,
          "1"
        ],
        [
          985000,
          "0"
        ]
      ]
    },
    {
      "id": "6",
      "name": "rst_n",
      "type": "reg",
      "width": "1",
      "values": [
        [
          0,
          "0"
        ],
        [
          35000,
          "1"
        ]
      ]
    }
  ],
  "data_signals": [
    {
      "id": "!",
      "name": "ADDR_WIDTH",
      "type": "parameter",
      "width": "32",
      "values": [
        [
          0,
          "0x10"
        ]
      ]
    },
    {
      "id": "$",
      "name": "DATA_WIDTH",
      "type": "parameter",
      "width": "32",
      "values": [
        [
          0,
          "0x20"
        ]
      ]
    },
    {
      "id": "%",
      "name": "cache_addr",
      "type": "reg",
      "width": "16",
      "values": [
        [
          0,
          "0x0"
        ],
        [
          175000,
          "0x100"
        ],
        [
          195000,
          "0x200"
        ],
        [
          225000,
          "0x0"
        ],
        [
          235000,
          "0x1"
        ],
        [
          245000,
          "0x2"
        ],
        [
          255000,
          "0x3"
        ],
        [
          265000,
          "0x4"
        ],
        [
          275000,
          "0x5"
        ],
        [
          285000,
          "0x6"
        ],
        [
          295000,
          "0x7"
        ],
        [
          305000,
          "0x8"
        ],
        [
          315000,
          "0x9"
        ],
        [
          325000,
          "0xa"
        ],
        [
          335000,
          "0xb"
        ],
        [
          345000,
          "0xc"
        ],
        [
          355000,
          "0xd"
        ],
        [
          365000,
          "0xe"
        ],
        [
          375000,
          "0xf"
        ],
        [
          385000,
          "0x10"
        ],
        [
          395000,
          "0x11"
        ],
        [
          405000,
          "0x12"
        ],
        [
          415000,
          "0x13"
        ],
        [
          425000,
          "0x0"
        ],
        [
          435000,
          "0x1"
        ],
        [
          445000,
          "0x2"
        ],
        [
          455000,
          "0x3"
        ],
        [
          465000,
          "0x4"
        ],
        [
          475000,
          "0x5"
        ],
        [
          485000,
          "0x6"
        ],
        [
          495000,
          "0x7"
        ],
        [
          505000,
          "0x8"
        ],
        [
          515000,
          "0x9"
        ],
        [
          525000,
          "0xa"
        ],
        [
          535000,
          "0xb"
        ],
        [
          545000,
          "0xc"
        ],
        [
          555000,
          "0xd"
        ],
        [
          565000,
          "0xe"
        ],
        [
          575000,
          "0xf"
        ],
        [
          585000,
          "0x10"
        ],
        [
          595000,
          "0x11"
        ],
        [
          605000,
          "0x12"
        ],
        [
          615000,
          "0x13"
        ],
        [
          625000,
          "0x0"
        ],
        [
          635000,
          "0x1"
        ],
        [
          645000,
          "0x2"
        ],
        [
          655000,
          "0x3"
        ],
        [
          665000,
          "0x4"
        ],
        [
          675000,
          "0x5"
        ],
        [
          685000,
          "0x6"
        ],
        [
          695000,
          "0x7"
        ],
        [
          705000,
          "0x8"
        ],
        [
          715000,
          "0x9"
        ],
        [
          745000,
          "0x0"
        ],
        [
          755000,
          "0x1"
        ],
        [
          765000,
          "0x2"
        ],
        [
          775000,
          "0x3"
        ],
        [
          785000,
          "0x4"
        ],
        [
          795000,
          "0x5"
        ],
        [
          805000,
          "0x6"
        ],
        [
          815000,
          "0x7"
        ],
        [
          825000,
          "0x8"
        ],
        [
          835000,
          "0x9"
        ],
        [
          855000,
          "0x0"
        ],
        [
          865000,
          "0x1"
        ],
        [
          875000,
          "0x2"
        ],
        [
          885000,
          "0x3"
        ],
        [
          895000,
          "0x4"
        ],
        [
          905000,
          "0x5"
        ],
        [
          915000,
          "0x6"
        ],
        [
          925000,
          "0x7"
        ],
        [
          935000,
          "0x8"
        ],
        [
          945000,
          "0x9"
        ]
      ]
    },
    {
      "id": "&",
      "name": "cache_data_in",
      "type": "reg",
      "width": "32",
      "values": [
        [
          0,
          "0x0"
        ],
        [
          175000,
          "0xdeadbeef"
        ],
        [
          745000,
          "0x0"
        ],
        [
          755000,
          "0x11111111"
        ],
        [
          765000,
          "0x22222222"
        ],
        [
          775000,
          "0x33333333"
        ],
        [
          785000,
          "0x44444444"
        ],
        [
          795000,
          "0x55555555"
        ],
        [
          805000,
          "0x66666666"
        ],
        [
          815000,
          "0x77777777"
        ],
        [
          825000,
          "0x88888888"
        ],
        [
          835000,
          "0x99999999"
        ]
      ]
    },
    {
      "id": "'",
      "name": "cache_data_out",
      "type": "reg",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          5000,
          "0x0"
        ],
        [
          185000,
          "0x12345778"
        ],
        [
          235000,
          "0x12345679"
        ],
        [
          255000,
          "0x1234567b"
        ],
        [
          275000,
          "0x1234567d"
        ],
        [
          295000,
          "0x1234567f"
        ],
        [
          315000,
          "0x12345681"
        ],
        [
          335000,
          "0x12345683"
        ],
        [
          355000,
          "0x12345685"
        ],
        [
          375000,
          "0x12345687"
        ],
        [
          395000,
          "0x12345689"
        ],
        [
          415000,
          "0x1234568b"
        ],
        [
          435000,
          "0x12345679"
        ],
        [
          455000,
          "0x1234567b"
        ],
        [
          475000,
          "0x1234567d"
        ],
        [
          495000,
          "0x1234567f"
        ],
        [
          515000,
          "0x12345681"
        ],
        [
          535000,
          "0x12345683"
        ],
        [
          555000,
          "0x12345685"
        ],
        [
          575000,
          "0x12345687"
        ],
        [
          595000,
          "0x12345689"
        ],
        [
          615000,
          "0x1234568b"
        ],
        [
          635000,
          "0x12345679"
        ],
        [
          655000,
          "0x1234567b"
        ],
        [
          675000,
          "0x1234567d"
        ],
        [
          695000,
          "0x1234567f"
        ],
        [
          715000,
          "0x12345681"
        ],
        [
          755000,
          "0x12345679"
        ],
        [
          765000,
          "0x11111111"
        ],
        [
          775000,
          "0x1234567b"
        ],
        [
          785000,
          "0x33333333"
        ],
        [
          795000,
          "0x1234567d"
        ],
        [
          805000,
          "0x55555555"
        ],
        [
          815000,
          "0x1234567f"
        ],
        [
          825000,
          "0x77777777"
        ],
        [
          835000,
          "0x12345681"
        ],
        [
          845000,
          "0x99999999"
        ],
        [
          865000,
          "0x11111111"
        ],
        [
          885000,
          "0x33333333"
        ],
        [
          905000,
          "0x55555555"
        ],
        [
          925000,
          "0x77777777"
        ],
        [
          945000,
          "0x99999999"
        ]
      ]
    },
    {
      "id": "2",
      "name": "dma_addr",
      "type": "reg",
      "width": "16",
      "values": [
        [
          0,
          "0x0"
        ]
      ]
    },
    {
      "id": "3",
      "name": "dma_data",
      "type": "reg",
      "width": "32",
      "values": [
        [
          0,
          "0x0"
        ]
      ]
    }
  ],
  "status_signals": [
    {
      "id": "\"",
      "name": "CACHE_SIZE",
      "type": "parameter",
      "width": "32",
      "values": [
        [
          0,
          "0x400"
        ]
      ]
    },
    {
      "id": ")",
      "name": "cache_hit",
      "type": "reg",
      "width": "1",
      "values": [
        [
          0,
          "x"
        ],
        [
          5000,
          "0"
        ],
        [
          195000,
          "1"
        ],
        [
          205000,
          "0"
        ],
        [
          245000,
          "1"
        ],
        [
          255000,
          "0"
        ],
        [
          265000,
          "1"
        ],
        [
          275000,
          "0"
        ],
        [
          285000,
          "1"
        ],
        [
          295000,
          "0"
        ],
        [
          305000,
          "1"
        ],
        [
          315000,
          "0"
        ],
        [
          325000,
          "1"
        ],
        [
          335000,
          "0"
        ],
        [
          345000,
          "1"
        ],
        [
          355000,
          "0"
        ],
        [
          365000,
          "1"
        ],
        [
          375000,
          "0"
        ],
        [
          385000,
          "1"
        ],
        [
          395000,
          "0"
        ],
        [
          405000,
          "1"
        ],
        [
          415000,
          "0"
        ],
        [
          425000,
          "1"
        ],
        [
          735000,
          "0"
        ],
        [
          755000,
          "1"
        ],
        [
          985000,
          "0"
        ]
      ]
    },
    {
      "id": "*",
      "name": "cache_hits",
      "type": "reg",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          5000,
          "0x0"
        ],
        [
          195000,
          "0x1"
        ],
        [
          245000,
          "0x2"
        ],
        [
          265000,
          "0x3"
        ],
        [
          285000,
          "0x4"
        ],
        [
          305000,
          "0x5"
        ],
        [
          325000,
          "0x6"
        ],
        [
          345000,
          "0x7"
        ],
        [
          365000,
          "0x8"
        ],
        [
          385000,
          "0x9"
        ],
        [
          405000,
          "0xa"
        ],
        [
          425000,
          "0xb"
        ],
        [
          435000,
          "0xc"
        ],
        [
          445000,
          "0xd"
        ],
        [
          455000,
          "0xe"
        ],
        [
          465000,
          "0xf"
        ],
        [
          475000,
          "0x10"
        ],
        [
          485000,
          "0x11"
        ],
        [
          495000,
          "0x12"
        ],
        [
          505000,
          "0x13"
        ],
        [
          515000,
          "0x14"
        ],
        [
          525000,
          "0x15"
        ],
        [
          535000,
          "0x16"
        ],
        [
          545000,
          "0x17"
        ],
        [
          555000,
          "0x18"
        ],
        [
          565000,
          "0x19"
        ],
        [
          575000,
          "0x1a"
        ],
        [
          585000,
          "0x1b"
        ],
        [
          595000,
          "0x1c"
        ],
        [
          605000,
          "0x1d"
        ],
        [
          615000,
          "0x1e"
        ],
        [
          625000,
          "0x1f"
        ],
        [
          635000,
          "0x20"
        ],
        [
          645000,
          "0x21"
        ],
        [
          655000,
          "0x22"
        ],
        [
          665000,
          "0x23"
        ],
        [
          675000,
          "0x24"
        ],
        [
          685000,
          "0x25"
        ],
        [
          695000,
          "0x26"
        ],
        [
          705000,
          "0x27"
        ],
        [
          715000,
          "0x28"
        ],
        [
          725000,
          "0x29"
        ],
        [
          755000,
          "0x2a"
        ],
        [
          765000,
          "0x2b"
        ],
        [
          775000,
          "0x2c"
        ],
        [
          785000,
          "0x2d"
        ],
        [
          795000,
          "0x2e"
        ],
        [
          805000,
          "0x2f"
        ],
        [
          815000,
          "0x30"
        ],
        [
          825000,
          "0x31"
        ],
        [
          835000,
          "0x32"
        ],
        [
          845000,
          "0x33"
        ],
        [
          855000,
          "0x34"
        ],
        [
          865000,
          "0x35"
        ],
        [
          875000,
          "0x36"
        ],
        [
          885000,
          "0x37"
        ],
        [
          895000,
          "0x38"
        ],
        [
          905000,
          "0x39"
        ],
        [
          915000,
          "0x3a"
        ],
        [
          925000,
          "0x3b"
        ],
        [
          935000,
          "0x3c"
        ],
        [
          945000,
          "0x3d"
        ],
        [
          955000,
          "0x3e"
        ],
        [
          965000,
          "0x3f"
        ],
        [
          975000,
          "0x40"
        ]
      ]
    },
    {
      "id": "+",
      "name": "cache_miss",
      "type": "reg",
      "width": "1",
      "values": [
        [
          0,
          "x"
        ],
        [
          5000,
          "0"
        ],
        [
          185000,
          "1"
        ],
        [
          195000,
          "0"
        ],
        [
          235000,
          "1"
        ],
        [
          245000,
          "0"
        ],
        [
          255000,
          "1"
        ],
        [
          265000,
          "0"
        ],
        [
          275000,
          "1"
        ],
        [
          285000,
          "0"
        ],
        [
          295000,
          "1"
        ],
        [
          305000,
          "0"
        ],
        [
          315000,
          "1"
        ],
        [
          325000,
          "0"
        ],
        [
          335000,
          "1"
        ],
        [
          345000,
          "0"
        ],
        [
          355000,
          "1"
        ],
        [
          365000,
          "0"
        ],
        [
          375000,
          "1"
        ],
        [
          385000,
          "0"
        ],
        [
          395000,
          "1"
        ],
        [
          405000,
          "0"
        ],
        [
          415000,
          "1"
        ],
        [
          425000,
          "0"
        ]
      ]
    },
    {
      "id": ",",
      "name": "cache_misses",
      "type": "reg",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          5000,
          "0x0"
        ],
        [
          185000,
          "0x1"
        ],
        [
          235000,
          "0x2"
        ],
        [
          255000,
          "0x3"
        ],
        [
          275000,
          "0x4"
        ],
        [
          295000,
          "0x5"
        ],
        [
          315000,
          "0x6"
        ],
        [
          335000,
          "0x7"
        ],
        [
          355000,
          "0x8"
        ],
        [
          375000,
          "0x9"
        ],
        [
          395000,
          "0xa"
        ],
        [
          415000,
          "0xb"
        ]
      ]
    },
    {
      "id": "/",
      "name": "controller_done",
      "type": "reg",
      "width": "1",
      "values": [
        [
          0,
          "x"
        ],
        [
          5000,
          "0"
        ]
      ]
    },
    {
      "id": "1",
      "name": "controller_start",
      "type": "reg",
      "width": "1",
      "values": [
        [
          0,
          "0"
        ],
        [
          75000,
          "1"
        ],
        [
          85000,
          "0"
        ],
        [
          115000,
          "1"
        ],
        [
          125000,
          "0"
        ],
        [
          845000,
          "1"
        ],
        [
          855000,
          "0"
        ]
      ]
    },
    {
      "id": "4",
      "name": "dma_req",
      "type": "reg",
      "width": "1",
      "values": [
        [
          0,
          "0"
        ]
      ]
    },
    {
      "id": "5",
      "name": "operation_type",
      "type": "reg",
      "width": "2",
      "values": [
        [
          0,
          "0x0"
        ],
        [
          115000,
          "0x1"
        ],
        [
          745000,
          "0x0"
        ]
      ]
    },
    {
      "id": "7",
      "name": "total_accesses",
      "type": "reg",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          5000,
          "0x0"
        ],
        [
          185000,
          "0x1"
        ],
        [
          195000,
          "0x2"
        ],
        [
          235000,
          "0x3"
        ],
        [
          245000,
          "0x4"
        ],
        [
          255000,
          "0x5"
        ],
        [
          265000,
          "0x6"
        ],
        [
          275000,
          "0x7"
        ],
        [
          285000,
          "0x8"
        ],
        [
          295000,
          "0x9"
        ],
        [
          305000,
          "0xa"
        ],
        [
          315000,
          "0xb"
        ],
        [
          325000,
          "0xc"
        ],
        [
          335000,
          "0xd"
        ],
        [
          345000,
          "0xe"
        ],
        [
          355000,
          "0xf"
        ],
        [
          365000,
          "0x10"
        ],
        [
          375000,
          "0x11"
        ],
        [
          385000,
          "0x12"
        ],
        [
          395000,
          "0x13"
        ],
        [
          405000,
          "0x14"
        ],
        [
          415000,
          "0x15"
        ],
        [
          425000,
          "0x16"
        ],
        [
          435000,
          "0x17"
        ],
        [
          445000,
          "0x18"
        ],
        [
          455000,
          "0x19"
        ],
        [
          465000,
          "0x1a"
        ],
        [
          475000,
          "0x1b"
        ],
        [
          485000,
          "0x1c"
        ],
        [
          495000,
          "0x1d"
        ],
        [
          505000,
          "0x1e"
        ],
        [
          515000,
          "0x1f"
        ],
        [
          525000,
          "0x20"
        ],
        [
          535000,
          "0x21"
        ],
        [
          545000,
          "0x22"
        ],
        [
          555000,
          "0x23"
        ],
        [
          565000,
          "0x24"
        ],
        [
          575000,
          "0x25"
        ],
        [
          585000,
          "0x26"
        ],
        [
          595000,
          "0x27"
        ],
        [
          605000,
          "0x28"
        ],
        [
          615000,
          "0x29"
        ],
        [
          625000,
          "0x2a"
        ],
        [
          635000,
          "0x2b"
        ],
        [
          645000,
          "0x2c"
        ],
        [
          655000,
          "0x2d"
        ],
        [
          665000,
          "0x2e"
        ],
        [
          675000,
          "0x2f"
        ],
        [
          685000,
          "0x30"
        ],
        [
          695000,
          "0x31"
        ],
        [
          705000,
          "0x32"
        ],
        [
          715000,
          "0x33"
        ],
        [
          725000,
          "0x34"
        ],
        [
          755000,
          "0x35"
        ],
        [
          765000,
          "0x36"
        ],
        [
          775000,
          "0x37"
        ],
        [
          785000,
          "0x38"
        ],
        [
          795000,
          "0x39"
        ],
        [
          805000,
          "0x3a"
        ],
        [
          815000,
          "0x3b"
        ],
        [
          825000,
          "0x3c"
        ],
        [
          835000,
          "0x3d"
        ],
        [
          845000,
          "0x3e"
        ],
        [
          855000,
          "0x3f"
        ],
        [
          865000,
          "0x40"
        ],
        [
          875000,
          "0x41"
        ],
        [
          885000,
          "0x42"
        ],
        [
          895000,
          "0x43"
        ],
        [
          905000,
          "0x44"
        ],
        [
          915000,
          "0x45"
        ],
        [
          925000,
          "0x46"
        ],
        [
          935000,
          "0x47"
        ],
        [
          945000,
          "0x48"
        ],
        [
          955000,
          "0x49"
        ],
        [
          965000,
          "0x4a"
        ],
        [
          975000,
          "0x4b"
        ]
      ]
    },
    {
      "id": "8",
      "name": "passed_tests",
      "type": "integer",
      "width": "32",
      "values": [
        [
          0,
          "0x0"
        ],
        [
          155000,
          "0x1"
        ],
        [
          205000,
          "0x2"
        ],
        [
          725000,
          "0x3"
        ]
      ]
    },
    {
      "id": "9",
      "name": "test_case",
      "type": "integer",
      "width": "32",
      "values": [
        [
          0,
          "0x0"
        ],
        [
          75000,
          "0x1"
        ],
        [
          175000,
          "0x2"
        ],
        [
          225000,
          "0x3"
        ],
        [
          745000,
          "0x4"
        ]
      ]
    },
    {
      "id": ":",
      "name": "total_tests",
      "type": "integer",
      "width": "32",
      "values": [
        [
          0,
          "0x0"
        ],
        [
          75000,
          "0x1"
        ],
        [
          175000,
          "0x2"
        ],
        [
          225000,
          "0x3"
        ],
        [
          745000,
          "0x4"
        ]
      ]
    },
    {
      "id": ";",
      "name": "i",
      "type": "integer",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          5000,
          "0x400"
        ],
        [
          15000,
          "0x400"
        ],
        [
          25000,
          "0x400"
        ],
        [
          35000,
          "0x400"
        ]
      ]
    },
    {
      "id": "<",
      "name": "start_accesses",
      "type": "reg",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          225000,
          "0x2"
        ]
      ]
    },
    {
      "id": "=",
      "name": "start_hits",
      "type": "reg",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          225000,
          "0x1"
        ]
      ]
    },
    {
      "id": ">",
      "name": "start_misses",
      "type": "reg",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          225000,
          "0x1"
        ]
      ]
    },
    {
      "id": "?",
      "name": "hit_rate",
      "type": "real",
      "width": "1",
      "values": []
    },
    {
      "id": "@",
      "name": "i",
      "type": "integer",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          225000,
          "0x0"
        ],
        [
          235000,
          "0x1"
        ],
        [
          245000,
          "0x2"
        ],
        [
          255000,
          "0x3"
        ],
        [
          265000,
          "0x4"
        ],
        [
          275000,
          "0x5"
        ],
        [
          285000,
          "0x6"
        ],
        [
          295000,
          "0x7"
        ],
        [
          305000,
          "0x8"
        ],
        [
          315000,
          "0x9"
        ],
        [
          325000,
          "0xa"
        ],
        [
          335000,
          "0xb"
        ],
        [
          345000,
          "0xc"
        ],
        [
          355000,
          "0xd"
        ],
        [
          365000,
          "0xe"
        ],
        [
          375000,
          "0xf"
        ],
        [
          385000,
          "0x10"
        ],
        [
          395000,
          "0x11"
        ],
        [
          405000,
          "0x12"
        ],
        [
          415000,
          "0x13"
        ],
        [
          425000,
          "0x14"
        ],
        [
          435000,
          "0x15"
        ],
        [
          445000,
          "0x16"
        ],
        [
          455000,
          "0x17"
        ],
        [
          465000,
          "0x18"
        ],
        [
          475000,
          "0x19"
        ],
        [
          485000,
          "0x1a"
        ],
        [
          495000,
          "0x1b"
        ],
        [
          505000,
          "0x1c"
        ],
        [
          515000,
          "0x1d"
        ],
        [
          525000,
          "0x1e"
        ],
        [
          535000,
          "0x1f"
        ],
        [
          545000,
          "0x20"
        ],
        [
          555000,
          "0x21"
        ],
        [
          565000,
          "0x22"
        ],
        [
          575000,
          "0x23"
        ],
        [
          585000,
          "0x24"
        ],
        [
          595000,
          "0x25"
        ],
        [
          605000,
          "0x26"
        ],
        [
          615000,
          "0x27"
        ],
        [
          625000,
          "0x28"
        ],
        [
          635000,
          "0x29"
        ],
        [
          645000,
          "0x2a"
        ],
        [
          655000,
          "0x2b"
        ],
        [
          665000,
          "0x2c"
        ],
        [
          675000,
          "0x2d"
        ],
        [
          685000,
          "0x2e"
        ],
        [
          695000,
          "0x2f"
        ],
        [
          705000,
          "0x30"
        ],
        [
          715000,
          "0x31"
        ],
        [
          725000,
          "0x32"
        ]
      ]
    },
    {
      "id": "A",
      "name": "i",
      "type": "integer",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          745000,
          "0x0"
        ],
        [
          755000,
          "0x1"
        ],
        [
          765000,
          "0x2"
        ],
        [
          775000,
          "0x3"
        ],
        [
          785000,
          "0x4"
        ],
        [
          795000,
          "0x5"
        ],
        [
          805000,
          "0x6"
        ],
        [
          815000,
          "0x7"
        ],
        [
          825000,
          "0x8"
        ],
        [
          835000,
          "0x9"
        ],
        [
          845000,
          "0xa"
        ]
      ]
    },
    {
      "id": "B",
      "name": "i",
      "type": "integer",
      "width": "32",
      "values": [
        [
          0,
          "x"
        ],
        [
          855000,
          "0x0"
        ],
        [
          865000,
          "0x1"
        ],
        [
          875000,
          "0x2"
        ],
        [
          885000,
          "0x3"
        ],
        [
          895000,
          "0x4"
        ],
        [
          905000,
          "0x5"
        ],
        [
          915000,
          "0x6"
        ],
        [
          925000,
          "0x7"
        ],
        [
          935000,
          "0x8"
        ],
        [
          945000,
          "0x9"
        ],
        [
          955000,
          "0xa"
        ]
      ]
    }
  ]
};
        
        // 全局变量
        let currentTimeStart = 0;
        let currentTimeEnd = 1000000;
        let currentZoom = 1;
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            calculateTimeRange();
            renderAllSignals();
        });
        
        function calculateTimeRange() {
            let maxTime = 0;
            
            // 计算所有信号的最大时间
            Object.values(rtlData).forEach(category => {
                category.forEach(signal => {
                    signal.values.forEach(([time, value]) => {
                        maxTime = Math.max(maxTime, time);
                    });
                });
            });
            
            document.getElementById('timeEnd').value = maxTime;
            currentTimeEnd = maxTime;
        }
        
        function renderAllSignals() {
            renderSignalCategory('clockSignals', rtlData.clock_signals, '#e74c3c');
            renderSignalCategory('controlSignals', rtlData.control_signals, '#f39c12');
            renderSignalCategory('dataSignals', rtlData.data_signals, '#3498db');
            renderSignalCategory('statusSignals', rtlData.status_signals, '#27ae60');
            updateTimeline();
        }
        
        function renderSignalCategory(containerId, signals, color) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            signals.forEach(signal => {
                const signalRow = document.createElement('div');
                signalRow.className = 'signal-row';
                
                const signalName = document.createElement('div');
                signalName.className = 'signal-name';
                signalName.textContent = signal.name;
                
                const canvas = document.createElement('canvas');
                canvas.className = 'signal-canvas';
                canvas.width = 1000;
                canvas.height = 60;
                
                const signalInfo = document.createElement('div');
                signalInfo.className = 'signal-info';
                signalInfo.innerHTML = `
                    类型: ${signal.type}<br>
                    宽度: ${signal.width}<br>
                    变化: ${signal.values.length}
                `;
                
                signalRow.appendChild(signalName);
                signalRow.appendChild(canvas);
                signalRow.appendChild(signalInfo);
                container.appendChild(signalRow);
                
                // 绘制波形
                drawRTLWaveform(canvas, signal, color);
            });
        }
        
        function drawRTLWaveform(canvas, signal, color) {
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            // 清空画布
            ctx.clearRect(0, 0, width, height);
            
            // 绘制背景网格
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 10; i++) {
                const x = (i / 10) * width;
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            // 绘制波形
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.font = '10px monospace';
            
            if (signal.values.length === 0) return;
            
            let lastValue = '0';
            let lastX = 0;
            let lastY = height - 10;
            
            ctx.beginPath();
            
            signal.values.forEach(([time, value], index) => {
                const x = ((time - currentTimeStart) / (currentTimeEnd - currentTimeStart)) * width;
                
                if (x >= 0 && x <= width) {
                    let y;
                    
                    // 根据信号类型确定Y位置
                    if (signal.width === '1') {
                        // 单bit信号
                        y = value === '1' || value === '0x1' ? 10 : height - 10;
                    } else {
                        // 多bit信号，显示为数字波形
                        y = height / 2;
                    }
                    
                    if (index === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        // 绘制从上一个值到当前时间的水平线
                        ctx.lineTo(x, lastY);
                        // 绘制垂直跳变线
                        ctx.lineTo(x, y);
                    }
                    
                    // 绘制值标签
                    if (signal.width !== '1' || (x - lastX) > 50) {
                        ctx.fillStyle = color;
                        let displayValue = value;
                        if (typeof value === 'string' && value.startsWith('0x')) {
                            displayValue = value;
                        } else if (signal.width !== '1') {
                            displayValue = `0x${value}`;
                        }
                        ctx.fillText(displayValue, x + 2, y - 5);
                    }
                    
                    lastX = x;
                    lastY = y;
                    lastValue = value;
                }
            });
            
            // 延伸到画布末尾
            ctx.lineTo(width, lastY);
            ctx.stroke();
        }
        
        function updateTimeline() {
            const timeline = document.getElementById('timeline');
            const timeRange = currentTimeEnd - currentTimeStart;
            const step = Math.pow(10, Math.floor(Math.log10(timeRange / 10)));
            
            let timelineText = '';
            for (let t = currentTimeStart; t <= currentTimeEnd; t += step) {
                timelineText += `${t}ps `;
            }
            
            timeline.textContent = timelineText;
        }
        
        function updateWaveforms() {
            currentTimeStart = parseInt(document.getElementById('timeStart').value) || 0;
            currentTimeEnd = parseInt(document.getElementById('timeEnd').value) || 1000000;
            currentZoom = parseInt(document.getElementById('zoomLevel').value) || 1;
            
            renderAllSignals();
        }
        
        function exportData() {
            const dataStr = JSON.stringify(rtlData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = 'tpu_controller_cache_test_rtl_waveform_data.json';
            link.click();
            
            URL.revokeObjectURL(url);
        }
        
        function analyzeSignals() {
            let analysis = "RTL信号分析报告\n";
            analysis += "==================\n\n";
            
            Object.entries(rtlData).forEach(([category, signals]) => {
                analysis += `${category.replace('_', ' ').toUpperCase()}: ${signals.length} 个信号\n`;
                signals.forEach(signal => {
                    analysis += `  - ${signal.name} (${signal.type}, ${signal.width}bit, ${signal.values.length} 变化)\n`;
                });
                analysis += "\n";
            });
            
            alert(analysis);
        }
    </script>
</body>
</html>