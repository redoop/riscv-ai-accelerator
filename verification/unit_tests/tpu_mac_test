#! /opt/homebrew/Cellar/icarus-verilog/12.0/bin/vvp
:ivl_version "12.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision - 12;
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/system.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_sys.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_textio.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2005_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/va_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2009.vpi";
S_0x126606c20 .scope package, "$unit" "$unit" 2 1;
 .timescale 0 0;
S_0x126606d90 .scope module, "test_tpu_mac_simple" "test_tpu_mac_simple" 3 6;
 .timescale -9 -12;
P_0x126607030 .param/l "CLK_PERIOD" 0 3 9, +C4<00000000000000000000000000001010>;
P_0x126607070 .param/l "DATA_WIDTH" 0 3 8, +C4<00000000000000000000000000100000>;
v0x126651fd0_0 .var "a_in", 31 0;
v0x126652080_0 .net "a_out", 31 0, v0x126650980_0;  1 drivers
v0x126652130_0 .var "accumulate", 0 0;
v0x126652200_0 .var "b_in", 31 0;
v0x1266522b0_0 .net "b_out", 31 0, v0x126650ee0_0;  1 drivers
v0x126652380_0 .var "c_in", 31 0;
v0x126652430_0 .net "c_out", 31 0, v0x126651040_0;  1 drivers
v0x1266524e0_0 .var "clk", 0 0;
v0x126652590_0 .var "data_type", 1 0;
v0x1266526c0_0 .var "enable", 0 0;
v0x126652750_0 .var "load_weight", 0 0;
v0x1266527e0_0 .net "overflow", 0 0, v0x126651700_0;  1 drivers
v0x126652890_0 .var/2s "pass_count", 31 0;
v0x126652920_0 .var "rst_n", 0 0;
v0x1266529b0_0 .var/2s "test_count", 31 0;
v0x126652a40_0 .net "underflow", 0 0, v0x126651840_0;  1 drivers
S_0x12661c240 .scope module, "dut" "tpu_mac_unit" 3 37, 4 7 0, S_0x126606d90;
 .timescale -9 -12;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst_n";
    .port_info 2 /INPUT 1 "enable";
    .port_info 3 /INPUT 2 "data_type";
    .port_info 4 /INPUT 32 "a_in";
    .port_info 5 /INPUT 32 "b_in";
    .port_info 6 /INPUT 32 "c_in";
    .port_info 7 /OUTPUT 32 "a_out";
    .port_info 8 /OUTPUT 32 "b_out";
    .port_info 9 /OUTPUT 32 "c_out";
    .port_info 10 /INPUT 1 "load_weight";
    .port_info 11 /INPUT 1 "accumulate";
    .port_info 12 /OUTPUT 1 "overflow";
    .port_info 13 /OUTPUT 1 "underflow";
P_0x1266099c0 .param/l "DATA_WIDTH" 0 4 8, +C4<00000000000000000000000000100000>;
v0x1266506a0_0 .var "a_fp16", 15 0;
v0x126650760_0 .var "a_fp32", 31 0;
v0x126650810_0 .net "a_in", 31 0, v0x126651fd0_0;  1 drivers
v0x1266508d0_0 .var "a_int8", 7 0;
v0x126650980_0 .var "a_out", 31 0;
v0x126650a70_0 .var "acc_result", 31 0;
v0x126650b20_0 .net "accumulate", 0 0, v0x126652130_0;  1 drivers
v0x126650bc0_0 .var "b_fp16", 15 0;
v0x126650c70_0 .var "b_fp32", 31 0;
v0x126650d80_0 .net "b_in", 31 0, v0x126652200_0;  1 drivers
v0x126650e30_0 .var "b_int8", 7 0;
v0x126650ee0_0 .var "b_out", 31 0;
v0x126650f90_0 .net "c_in", 31 0, v0x126652380_0;  1 drivers
v0x126651040_0 .var "c_out", 31 0;
v0x1266510f0_0 .net "clk", 0 0, v0x1266524e0_0;  1 drivers
v0x126651190_0 .net "data_type", 1 0, v0x126652590_0;  1 drivers
v0x126651240_0 .net "enable", 0 0, v0x1266526c0_0;  1 drivers
v0x1266513d0_0 .net "load_weight", 0 0, v0x126652750_0;  1 drivers
v0x126651460_0 .var "mult_fp16", 15 0;
v0x1266514f0_0 .var "mult_fp32", 31 0;
v0x1266515a0_0 .var "mult_int8", 15 0;
v0x126651650_0 .var "mult_result", 31 0;
v0x126651700_0 .var "overflow", 0 0;
v0x1266517a0_0 .net "rst_n", 0 0, v0x126652920_0;  1 drivers
v0x126651840_0 .var "underflow", 0 0;
v0x1266518e0_0 .var "weight_reg", 31 0;
E_0x12661c500/0 .event anyedge, v0x126651190_0, v0x126650a70_0, v0x126650a70_0, v0x12664ef30_0;
E_0x12661c500/1 .event anyedge, v0x12664ef30_0, v0x12664f260_0, v0x12664f260_0, v0x12664fe30_0;
E_0x12661c500/2 .event anyedge, v0x12664fe30_0, v0x126650150_0, v0x126650150_0;
E_0x12661c500 .event/or E_0x12661c500/0, E_0x12661c500/1, E_0x12661c500/2;
E_0x12660a2b0/0 .event negedge, v0x1266517a0_0;
E_0x12660a2b0/1 .event posedge, v0x1266510f0_0;
E_0x12660a2b0 .event/or E_0x12660a2b0/0, E_0x12660a2b0/1;
E_0x126615da0/0 .event anyedge, v0x126650b20_0, v0x126651190_0, v0x126650f90_0, v0x126651650_0;
E_0x126615da0/1 .event anyedge, v0x126650f90_0, v0x126651650_0;
E_0x126615da0 .event/or E_0x126615da0/0, E_0x126615da0/1;
E_0x12660b6d0/0 .event anyedge, v0x126651190_0, v0x1266508d0_0, v0x126650e30_0, v0x1266515a0_0;
E_0x12660b6d0/1 .event anyedge, v0x1266506a0_0, v0x126650bc0_0, v0x12664f700_0, v0x126650760_0;
E_0x12660b6d0/2 .event anyedge, v0x126650c70_0, v0x1266505f0_0;
E_0x12660b6d0 .event/or E_0x12660b6d0/0, E_0x12660b6d0/1, E_0x12660b6d0/2;
E_0x126609560/0 .event anyedge, v0x126651190_0, v0x126650810_0, v0x1266518e0_0, v0x126650810_0;
E_0x126609560/1 .event anyedge, v0x1266518e0_0, v0x126650810_0, v0x1266518e0_0;
E_0x126609560 .event/or E_0x126609560/0, E_0x126609560/1;
S_0x126640a90 .scope autofunction.vec4.s16, "fp16_add" "fp16_add" 4 178, 4 178 0, S_0x12661c240;
 .timescale -9 -12;
v0x126637240_0 .var "a", 15 0;
v0x12664eb70_0 .var "b", 15 0;
; Variable fp16_add is vec4 return value of scope S_0x126640a90
TD_test_tpu_mac_simple.dut.fp16_add ;
    %load/vec4 v0x126637240_0;
    %load/vec4 v0x12664eb70_0;
    %add;
    %ret/vec4 0, 0, 16;  Assign to fp16_add (store_vec4_to_lval)
    %end;
S_0x12664ecc0 .scope autofunction.vec4.s1, "fp16_is_overflow" "fp16_is_overflow" 4 191, 4 191 0, S_0x12661c240;
 .timescale -9 -12;
; Variable fp16_is_overflow is vec4 return value of scope S_0x12664ecc0
v0x12664ef30_0 .var "val", 15 0;
TD_test_tpu_mac_simple.dut.fp16_is_overflow ;
    %load/vec4 v0x12664ef30_0;
    %parti/s 5, 10, 5;
    %cmpi/e 31, 0, 5;
    %flag_get/vec4 4;
    %jmp/0 T_1.0, 4;
    %load/vec4 v0x12664ef30_0;
    %parti/s 10, 0, 2;
    %pushi/vec4 0, 0, 10;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_1.0;
    %ret/vec4 0, 0, 1;  Assign to fp16_is_overflow (store_vec4_to_lval)
    %end;
S_0x12664efe0 .scope autofunction.vec4.s1, "fp16_is_underflow" "fp16_is_underflow" 4 195, 4 195 0, S_0x12661c240;
 .timescale -9 -12;
; Variable fp16_is_underflow is vec4 return value of scope S_0x12664efe0
v0x12664f260_0 .var "val", 15 0;
TD_test_tpu_mac_simple.dut.fp16_is_underflow ;
    %load/vec4 v0x12664f260_0;
    %parti/s 5, 10, 5;
    %cmpi/e 0, 0, 5;
    %flag_get/vec4 4;
    %jmp/0 T_2.1, 4;
    %load/vec4 v0x12664f260_0;
    %parti/s 10, 0, 2;
    %pushi/vec4 0, 0, 10;
    %cmp/ne;
    %flag_get/vec4 4;
    %and;
T_2.1;
    %ret/vec4 0, 0, 1;  Assign to fp16_is_underflow (store_vec4_to_lval)
    %end;
S_0x12664f310 .scope autofunction.vec4.s16, "fp16_multiply" "fp16_multiply" 4 171, 4 171 0, S_0x12661c240;
 .timescale -9 -12;
v0x12664f4d0_0 .var "a", 15 0;
v0x12664f590_0 .var "b", 15 0;
; Variable fp16_multiply is vec4 return value of scope S_0x12664f310
v0x12664f700_0 .var "temp_result", 31 0;
TD_test_tpu_mac_simple.dut.fp16_multiply ;
    %load/vec4 v0x12664f4d0_0;
    %pad/u 32;
    %load/vec4 v0x12664f590_0;
    %pad/u 32;
    %mul;
    %store/vec4 v0x12664f700_0, 0, 32;
    %load/vec4 v0x12664f700_0;
    %parti/s 16, 0, 2;
    %ret/vec4 0, 0, 16;  Assign to fp16_multiply (store_vec4_to_lval)
    %end;
S_0x12664f7b0 .scope autofunction.vec4.s32, "fp32_add" "fp32_add" 4 166, 4 166 0, S_0x12661c240;
 .timescale -9 -12;
v0x12664f9b0_0 .var "a", 31 0;
v0x12664fa70_0 .var "b", 31 0;
; Variable fp32_add is vec4 return value of scope S_0x12664f7b0
TD_test_tpu_mac_simple.dut.fp32_add ;
    %load/vec4 v0x12664f9b0_0;
    %load/vec4 v0x12664fa70_0;
    %add;
    %ret/vec4 0, 0, 32;  Assign to fp32_add (store_vec4_to_lval)
    %end;
S_0x12664fbc0 .scope autofunction.vec4.s1, "fp32_is_overflow" "fp32_is_overflow" 4 183, 4 183 0, S_0x12661c240;
 .timescale -9 -12;
; Variable fp32_is_overflow is vec4 return value of scope S_0x12664fbc0
v0x12664fe30_0 .var "val", 31 0;
TD_test_tpu_mac_simple.dut.fp32_is_overflow ;
    %load/vec4 v0x12664fe30_0;
    %parti/s 8, 23, 6;
    %cmpi/e 255, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_5.2, 4;
    %load/vec4 v0x12664fe30_0;
    %parti/s 23, 0, 2;
    %pushi/vec4 0, 0, 23;
    %cmp/e;
    %flag_get/vec4 4;
    %and;
T_5.2;
    %ret/vec4 0, 0, 1;  Assign to fp32_is_overflow (store_vec4_to_lval)
    %end;
S_0x12664fee0 .scope autofunction.vec4.s1, "fp32_is_underflow" "fp32_is_underflow" 4 187, 4 187 0, S_0x12661c240;
 .timescale -9 -12;
; Variable fp32_is_underflow is vec4 return value of scope S_0x12664fee0
v0x126650150_0 .var "val", 31 0;
TD_test_tpu_mac_simple.dut.fp32_is_underflow ;
    %load/vec4 v0x126650150_0;
    %parti/s 8, 23, 6;
    %cmpi/e 0, 0, 8;
    %flag_get/vec4 4;
    %jmp/0 T_6.3, 4;
    %load/vec4 v0x126650150_0;
    %parti/s 23, 0, 2;
    %pushi/vec4 0, 0, 23;
    %cmp/ne;
    %flag_get/vec4 4;
    %and;
T_6.3;
    %ret/vec4 0, 0, 1;  Assign to fp32_is_underflow (store_vec4_to_lval)
    %end;
S_0x126650200 .scope autofunction.vec4.s32, "fp32_multiply" "fp32_multiply" 4 159, 4 159 0, S_0x12661c240;
 .timescale -9 -12;
v0x1266503c0_0 .var "a", 31 0;
v0x126650480_0 .var "b", 31 0;
; Variable fp32_multiply is vec4 return value of scope S_0x126650200
v0x1266505f0_0 .var "temp_result", 63 0;
TD_test_tpu_mac_simple.dut.fp32_multiply ;
    %load/vec4 v0x1266503c0_0;
    %pad/u 64;
    %load/vec4 v0x126650480_0;
    %pad/u 64;
    %mul;
    %store/vec4 v0x1266505f0_0, 0, 64;
    %load/vec4 v0x1266505f0_0;
    %parti/s 32, 0, 2;
    %ret/vec4 0, 0, 32;  Assign to fp32_multiply (store_vec4_to_lval)
    %end;
S_0x126651ae0 .scope task, "test_accumulation" "test_accumulation" 3 159, 3 159 0, S_0x126606d90;
 .timescale -9 -12;
E_0x1266377d0 .event posedge, v0x1266510f0_0;
TD_test_tpu_mac_simple.test_accumulation ;
    ; show_stmt_assign_vector: Get l-value for compressed += operand
    %load/vec4 v0x1266529b0_0;
    %pushi/vec4 1, 0, 32;
    %add;
    %cast2;
    %store/vec4 v0x1266529b0_0, 0, 32;
    %vpi_call/w 3 161 "$display", "\012Test %0d: Accumulation", v0x1266529b0_0 {0 0 0};
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x126652590_0, 0, 2;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x1266526c0_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x126652130_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x126652750_0, 0, 1;
    %pushi/vec4 67372036, 0, 32;
    %store/vec4 v0x126652200_0, 0, 32;
    %pushi/vec4 2, 0, 32;
T_8.4 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_8.5, 5;
    %jmp/1 T_8.5, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_8.4;
T_8.5 ;
    %pop/vec4 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126652750_0, 0, 1;
    %pushi/vec4 50529027, 0, 32;
    %store/vec4 v0x126651fd0_0, 0, 32;
    %pushi/vec4 84215045, 0, 32;
    %store/vec4 v0x126652380_0, 0, 32;
    %pushi/vec4 3, 0, 32;
T_8.6 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_8.7, 5;
    %jmp/1 T_8.7, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_8.6;
T_8.7 ;
    %pop/vec4 1;
    %load/vec4 v0x126652430_0;
    %parti/s 8, 0, 2;
    %cmpi/e 17, 0, 8;
    %jmp/0xz  T_8.8, 4;
    %vpi_call/w 3 180 "$display", "  PASS: 3 * 4 + 5 = %0d", &PV<v0x126652430_0, 0, 8> {0 0 0};
    ; show_stmt_assign_vector: Get l-value for compressed += operand
    %load/vec4 v0x126652890_0;
    %pushi/vec4 1, 0, 32;
    %add;
    %cast2;
    %store/vec4 v0x126652890_0, 0, 32;
    %jmp T_8.9;
T_8.8 ;
    %vpi_call/w 3 183 "$display", "  FAIL: Expected 17, got %0d", &PV<v0x126652430_0, 0, 8> {0 0 0};
T_8.9 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126652130_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x1266526c0_0, 0, 1;
    %pushi/vec4 2, 0, 32;
T_8.10 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_8.11, 5;
    %jmp/1 T_8.11, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_8.10;
T_8.11 ;
    %pop/vec4 1;
    %end;
S_0x126651c50 .scope task, "test_basic_int8" "test_basic_int8" 3 96, 3 96 0, S_0x126606d90;
 .timescale -9 -12;
TD_test_tpu_mac_simple.test_basic_int8 ;
    ; show_stmt_assign_vector: Get l-value for compressed += operand
    %load/vec4 v0x1266529b0_0;
    %pushi/vec4 1, 0, 32;
    %add;
    %cast2;
    %store/vec4 v0x1266529b0_0, 0, 32;
    %vpi_call/w 3 98 "$display", "\012Test %0d: Basic INT8 multiplication", v0x1266529b0_0 {0 0 0};
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x126652590_0, 0, 2;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x1266526c0_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126652130_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x126652750_0, 0, 1;
    %pushi/vec4 84215045, 0, 32;
    %store/vec4 v0x126652200_0, 0, 32;
    %pushi/vec4 2, 0, 32;
T_9.12 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_9.13, 5;
    %jmp/1 T_9.13, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_9.12;
T_9.13 ;
    %pop/vec4 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126652750_0, 0, 1;
    %pushi/vec4 50529027, 0, 32;
    %store/vec4 v0x126651fd0_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x126652380_0, 0, 32;
    %pushi/vec4 3, 0, 32;
T_9.14 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_9.15, 5;
    %jmp/1 T_9.15, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_9.14;
T_9.15 ;
    %pop/vec4 1;
    %load/vec4 v0x126652430_0;
    %parti/s 8, 0, 2;
    %cmpi/e 15, 0, 8;
    %jmp/0xz  T_9.16, 4;
    %vpi_call/w 3 117 "$display", "  PASS: 3 * 5 = %0d", &PV<v0x126652430_0, 0, 8> {0 0 0};
    ; show_stmt_assign_vector: Get l-value for compressed += operand
    %load/vec4 v0x126652890_0;
    %pushi/vec4 1, 0, 32;
    %add;
    %cast2;
    %store/vec4 v0x126652890_0, 0, 32;
    %jmp T_9.17;
T_9.16 ;
    %vpi_call/w 3 120 "$display", "  FAIL: Expected 15, got %0d", &PV<v0x126652430_0, 0, 8> {0 0 0};
T_9.17 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x1266526c0_0, 0, 1;
    %pushi/vec4 2, 0, 32;
T_9.18 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_9.19, 5;
    %jmp/1 T_9.19, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_9.18;
T_9.19 ;
    %pop/vec4 1;
    %end;
S_0x126651e10 .scope task, "test_weight_loading" "test_weight_loading" 3 128, 3 128 0, S_0x126606d90;
 .timescale -9 -12;
TD_test_tpu_mac_simple.test_weight_loading ;
    ; show_stmt_assign_vector: Get l-value for compressed += operand
    %load/vec4 v0x1266529b0_0;
    %pushi/vec4 1, 0, 32;
    %add;
    %cast2;
    %store/vec4 v0x1266529b0_0, 0, 32;
    %vpi_call/w 3 130 "$display", "\012Test %0d: Weight loading", v0x1266529b0_0 {0 0 0};
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x126652590_0, 0, 2;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x1266526c0_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x126652750_0, 0, 1;
    %pushi/vec4 117901063, 0, 32;
    %store/vec4 v0x126652200_0, 0, 32;
    %pushi/vec4 2, 0, 32;
T_10.20 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_10.21, 5;
    %jmp/1 T_10.21, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_10.20;
T_10.21 ;
    %pop/vec4 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126652750_0, 0, 1;
    %pushi/vec4 33686018, 0, 32;
    %store/vec4 v0x126651fd0_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x126652380_0, 0, 32;
    %pushi/vec4 3, 0, 32;
T_10.22 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_10.23, 5;
    %jmp/1 T_10.23, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_10.22;
T_10.23 ;
    %pop/vec4 1;
    %load/vec4 v0x126652430_0;
    %parti/s 8, 0, 2;
    %cmpi/e 14, 0, 8;
    %jmp/0xz  T_10.24, 4;
    %vpi_call/w 3 148 "$display", "  PASS: 2 * 7 = %0d", &PV<v0x126652430_0, 0, 8> {0 0 0};
    ; show_stmt_assign_vector: Get l-value for compressed += operand
    %load/vec4 v0x126652890_0;
    %pushi/vec4 1, 0, 32;
    %add;
    %cast2;
    %store/vec4 v0x126652890_0, 0, 32;
    %jmp T_10.25;
T_10.24 ;
    %vpi_call/w 3 151 "$display", "  FAIL: Expected 14, got %0d", &PV<v0x126652430_0, 0, 8> {0 0 0};
T_10.25 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x1266526c0_0, 0, 1;
    %pushi/vec4 2, 0, 32;
T_10.26 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_10.27, 5;
    %jmp/1 T_10.27, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_10.26;
T_10.27 ;
    %pop/vec4 1;
    %end;
    .scope S_0x12661c240;
T_11 ;
Ewait_0 .event/or E_0x126609560, E_0x0;
    %wait Ewait_0;
    %load/vec4 v0x126651190_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 2;
    %cmp/u;
    %jmp/1 T_11.0, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_11.1, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_11.2, 6;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x1266508d0_0, 0, 8;
    %pushi/vec4 0, 0, 8;
    %store/vec4 v0x126650e30_0, 0, 8;
    %jmp T_11.4;
T_11.0 ;
    %load/vec4 v0x126650810_0;
    %parti/s 8, 0, 2;
    %store/vec4 v0x1266508d0_0, 0, 8;
    %load/vec4 v0x1266518e0_0;
    %parti/s 8, 0, 2;
    %store/vec4 v0x126650e30_0, 0, 8;
    %jmp T_11.4;
T_11.1 ;
    %load/vec4 v0x126650810_0;
    %parti/s 16, 0, 2;
    %store/vec4 v0x1266506a0_0, 0, 16;
    %load/vec4 v0x1266518e0_0;
    %parti/s 16, 0, 2;
    %store/vec4 v0x126650bc0_0, 0, 16;
    %jmp T_11.4;
T_11.2 ;
    %load/vec4 v0x126650810_0;
    %store/vec4 v0x126650760_0, 0, 32;
    %load/vec4 v0x1266518e0_0;
    %store/vec4 v0x126650c70_0, 0, 32;
    %jmp T_11.4;
T_11.4 ;
    %pop/vec4 1;
    %jmp T_11;
    .thread T_11, $push;
    .scope S_0x12661c240;
T_12 ;
Ewait_1 .event/or E_0x12660b6d0, E_0x0;
    %wait Ewait_1;
    %load/vec4 v0x126651190_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 2;
    %cmp/u;
    %jmp/1 T_12.0, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_12.1, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_12.2, 6;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x126651650_0, 0, 32;
    %jmp T_12.4;
T_12.0 ;
    %load/vec4 v0x1266508d0_0;
    %pad/s 16;
    %load/vec4 v0x126650e30_0;
    %pad/s 16;
    %mul;
    %store/vec4 v0x1266515a0_0, 0, 16;
    %load/vec4 v0x1266515a0_0;
    %parti/s 1, 15, 5;
    %replicate 16;
    %load/vec4 v0x1266515a0_0;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x126651650_0, 0, 32;
    %jmp T_12.4;
T_12.1 ;
    %alloc S_0x12664f310;
    %load/vec4 v0x1266506a0_0;
    %load/vec4 v0x126650bc0_0;
    %store/vec4 v0x12664f590_0, 0, 16;
    %store/vec4 v0x12664f4d0_0, 0, 16;
    %callf/vec4 TD_test_tpu_mac_simple.dut.fp16_multiply, S_0x12664f310;
    %free S_0x12664f310;
    %store/vec4 v0x126651460_0, 0, 16;
    %pushi/vec4 0, 0, 16;
    %load/vec4 v0x126651460_0;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x126651650_0, 0, 32;
    %jmp T_12.4;
T_12.2 ;
    %alloc S_0x126650200;
    %load/vec4 v0x126650760_0;
    %load/vec4 v0x126650c70_0;
    %store/vec4 v0x126650480_0, 0, 32;
    %store/vec4 v0x1266503c0_0, 0, 32;
    %callf/vec4 TD_test_tpu_mac_simple.dut.fp32_multiply, S_0x126650200;
    %free S_0x126650200;
    %store/vec4 v0x1266514f0_0, 0, 32;
    %load/vec4 v0x1266514f0_0;
    %store/vec4 v0x126651650_0, 0, 32;
    %jmp T_12.4;
T_12.4 ;
    %pop/vec4 1;
    %jmp T_12;
    .thread T_12, $push;
    .scope S_0x12661c240;
T_13 ;
Ewait_2 .event/or E_0x126615da0, E_0x0;
    %wait Ewait_2;
    %load/vec4 v0x126650b20_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_13.0, 8;
    %load/vec4 v0x126651190_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 2;
    %cmp/u;
    %jmp/1 T_13.2, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_13.3, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_13.4, 6;
    %load/vec4 v0x126651650_0;
    %store/vec4 v0x126650a70_0, 0, 32;
    %jmp T_13.6;
T_13.2 ;
    %load/vec4 v0x126650f90_0;
    %load/vec4 v0x126651650_0;
    %add;
    %store/vec4 v0x126650a70_0, 0, 32;
    %jmp T_13.6;
T_13.3 ;
    %pushi/vec4 0, 0, 16;
    %alloc S_0x126640a90;
    %load/vec4 v0x126650f90_0;
    %parti/s 16, 0, 2;
    %load/vec4 v0x126651650_0;
    %parti/s 16, 0, 2;
    %store/vec4 v0x12664eb70_0, 0, 16;
    %store/vec4 v0x126637240_0, 0, 16;
    %callf/vec4 TD_test_tpu_mac_simple.dut.fp16_add, S_0x126640a90;
    %free S_0x126640a90;
    %concat/vec4; draw_concat_vec4
    %store/vec4 v0x126650a70_0, 0, 32;
    %jmp T_13.6;
T_13.4 ;
    %alloc S_0x12664f7b0;
    %load/vec4 v0x126650f90_0;
    %load/vec4 v0x126651650_0;
    %store/vec4 v0x12664fa70_0, 0, 32;
    %store/vec4 v0x12664f9b0_0, 0, 32;
    %callf/vec4 TD_test_tpu_mac_simple.dut.fp32_add, S_0x12664f7b0;
    %free S_0x12664f7b0;
    %store/vec4 v0x126650a70_0, 0, 32;
    %jmp T_13.6;
T_13.6 ;
    %pop/vec4 1;
    %jmp T_13.1;
T_13.0 ;
    %load/vec4 v0x126651650_0;
    %store/vec4 v0x126650a70_0, 0, 32;
T_13.1 ;
    %jmp T_13;
    .thread T_13, $push;
    .scope S_0x12661c240;
T_14 ;
    %wait E_0x12660a2b0;
    %load/vec4 v0x1266517a0_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_14.0, 8;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x1266518e0_0, 0;
    %jmp T_14.1;
T_14.0 ;
    %load/vec4 v0x1266513d0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_14.2, 8;
    %load/vec4 v0x126650d80_0;
    %assign/vec4 v0x1266518e0_0, 0;
T_14.2 ;
T_14.1 ;
    %jmp T_14;
    .thread T_14;
    .scope S_0x12661c240;
T_15 ;
    %wait E_0x12660a2b0;
    %load/vec4 v0x1266517a0_0;
    %nor/r;
    %flag_set/vec4 8;
    %jmp/0xz  T_15.0, 8;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x126650980_0, 0;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x126650ee0_0, 0;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x126651040_0, 0;
    %jmp T_15.1;
T_15.0 ;
    %load/vec4 v0x126651240_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_15.2, 8;
    %load/vec4 v0x126650810_0;
    %assign/vec4 v0x126650980_0, 0;
    %load/vec4 v0x126650d80_0;
    %assign/vec4 v0x126650ee0_0, 0;
    %load/vec4 v0x126650a70_0;
    %assign/vec4 v0x126651040_0, 0;
T_15.2 ;
T_15.1 ;
    %jmp T_15;
    .thread T_15;
    .scope S_0x12661c240;
T_16 ;
Ewait_3 .event/or E_0x12661c500, E_0x0;
    %wait Ewait_3;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126651700_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126651840_0, 0, 1;
    %load/vec4 v0x126651190_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 2;
    %cmp/u;
    %jmp/1 T_16.0, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 2;
    %cmp/u;
    %jmp/1 T_16.1, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 2;
    %cmp/u;
    %jmp/1 T_16.2, 6;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126651700_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126651840_0, 0, 1;
    %jmp T_16.4;
T_16.0 ;
    %pushi/vec4 2147483647, 0, 32;
    %load/vec4 v0x126650a70_0;
    %cmp/s;
    %flag_get/vec4 5;
    %store/vec4 v0x126651700_0, 0, 1;
    %load/vec4 v0x126650a70_0;
    %cmpi/s 2147483648, 0, 32;
    %flag_get/vec4 5;
    %store/vec4 v0x126651840_0, 0, 1;
    %jmp T_16.4;
T_16.1 ;
    %alloc S_0x12664ecc0;
    %load/vec4 v0x126650a70_0;
    %parti/s 16, 0, 2;
    %store/vec4 v0x12664ef30_0, 0, 16;
    %callf/vec4 TD_test_tpu_mac_simple.dut.fp16_is_overflow, S_0x12664ecc0;
    %free S_0x12664ecc0;
    %store/vec4 v0x126651700_0, 0, 1;
    %alloc S_0x12664efe0;
    %load/vec4 v0x126650a70_0;
    %parti/s 16, 0, 2;
    %store/vec4 v0x12664f260_0, 0, 16;
    %callf/vec4 TD_test_tpu_mac_simple.dut.fp16_is_underflow, S_0x12664efe0;
    %free S_0x12664efe0;
    %store/vec4 v0x126651840_0, 0, 1;
    %jmp T_16.4;
T_16.2 ;
    %alloc S_0x12664fbc0;
    %load/vec4 v0x126650a70_0;
    %store/vec4 v0x12664fe30_0, 0, 32;
    %callf/vec4 TD_test_tpu_mac_simple.dut.fp32_is_overflow, S_0x12664fbc0;
    %free S_0x12664fbc0;
    %store/vec4 v0x126651700_0, 0, 1;
    %alloc S_0x12664fee0;
    %load/vec4 v0x126650a70_0;
    %store/vec4 v0x126650150_0, 0, 32;
    %callf/vec4 TD_test_tpu_mac_simple.dut.fp32_is_underflow, S_0x12664fee0;
    %free S_0x12664fee0;
    %store/vec4 v0x126651840_0, 0, 1;
    %jmp T_16.4;
T_16.4 ;
    %pop/vec4 1;
    %jmp T_16;
    .thread T_16, $push;
    .scope S_0x126606d90;
T_17 ;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x1266529b0_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x126652890_0, 0, 32;
    %end;
    .thread T_17, $init;
    .scope S_0x126606d90;
T_18 ;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x1266524e0_0, 0, 1;
T_18.0 ;
    %delay 5000, 0;
    %load/vec4 v0x1266524e0_0;
    %inv;
    %store/vec4 v0x1266524e0_0, 0, 1;
    %jmp T_18.0;
    %end;
    .thread T_18;
    .scope S_0x126606d90;
T_19 ;
    %vpi_call/w 3 56 "$display", "=== Simple TPU MAC Unit Test ===" {0 0 0};
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126652920_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x1266526c0_0, 0, 1;
    %pushi/vec4 0, 0, 2;
    %store/vec4 v0x126652590_0, 0, 2;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x126651fd0_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x126652200_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x126652380_0, 0, 32;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126652750_0, 0, 1;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x126652130_0, 0, 1;
    %pushi/vec4 4, 0, 32;
T_19.0 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_19.1, 5;
    %jmp/1 T_19.1, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_19.0;
T_19.1 ;
    %pop/vec4 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x126652920_0, 0, 1;
    %pushi/vec4 4, 0, 32;
T_19.2 %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/s;
    %jmp/1xz T_19.3, 5;
    %jmp/1 T_19.3, 4;
    %pushi/vec4 1, 0, 32;
    %sub;
    %wait E_0x1266377d0;
    %jmp T_19.2;
T_19.3 ;
    %pop/vec4 1;
    %fork TD_test_tpu_mac_simple.test_basic_int8, S_0x126651c50;
    %join;
    %fork TD_test_tpu_mac_simple.test_weight_loading, S_0x126651e10;
    %join;
    %fork TD_test_tpu_mac_simple.test_accumulation, S_0x126651ae0;
    %join;
    %vpi_call/w 3 82 "$display", "\012=== Test Summary ===" {0 0 0};
    %vpi_call/w 3 83 "$display", "Tests run: %0d", v0x1266529b0_0 {0 0 0};
    %vpi_call/w 3 84 "$display", "Tests passed: %0d", v0x126652890_0 {0 0 0};
    %load/vec4 v0x126652890_0;
    %load/vec4 v0x1266529b0_0;
    %cmp/e;
    %jmp/0xz  T_19.4, 4;
    %vpi_call/w 3 87 "$display", "All tests PASSED!" {0 0 0};
    %jmp T_19.5;
T_19.4 ;
    %vpi_call/w 3 89 "$display", "Some tests FAILED!" {0 0 0};
T_19.5 ;
    %vpi_call/w 3 92 "$finish" {0 0 0};
    %end;
    .thread T_19;
# The file index is used to find the file name in the following table.
:file_names 5;
    "N/A";
    "<interactive>";
    "-";
    "test_tpu_mac_simple.sv";
    "../../rtl/accelerators/tpu_mac_unit.sv";
