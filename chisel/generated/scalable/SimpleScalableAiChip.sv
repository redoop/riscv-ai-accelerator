// Generated by CIRCT firtool-1.62.0
// Standard header to adapt well known macros for register randomization.
`ifndef RANDOMIZE
  `ifdef RANDOMIZE_REG_INIT
    `define RANDOMIZE
  `endif // RANDOMIZE_REG_INIT
`endif // not def RANDOMIZE

// RANDOM may be set to an expression that produces a 32-bit random unsigned value.
`ifndef RANDOM
  `define RANDOM $random
`endif // not def RANDOM

// Users can define INIT_RANDOM as general code that gets injected into the
// initializer block for modules with registers.
`ifndef INIT_RANDOM
  `define INIT_RANDOM
`endif // not def INIT_RANDOM

// If using random initialization, you can also define RANDOMIZE_DELAY to
// customize the delay used, otherwise 0.002 is used.
`ifndef RANDOMIZE_DELAY
  `define RANDOMIZE_DELAY 0.002
`endif // not def RANDOMIZE_DELAY

// Define INIT_RANDOM_PROLOG_ for use in our modules below.
`ifndef INIT_RANDOM_PROLOG_
  `ifdef RANDOMIZE
    `ifdef VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM
    `else  // VERILATOR
      `define INIT_RANDOM_PROLOG_ `INIT_RANDOM #`RANDOMIZE_DELAY begin end
    `endif // VERILATOR
  `else  // RANDOMIZE
    `define INIT_RANDOM_PROLOG_
  `endif // RANDOMIZE
`endif // not def INIT_RANDOM_PROLOG_

// Include register initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_REG_
    `define ENABLE_INITIAL_REG_
  `endif // not def ENABLE_INITIAL_REG_
`endif // not def SYNTHESIS

// Include rmemory initializers in init blocks unless synthesis is set
`ifndef SYNTHESIS
  `ifndef ENABLE_INITIAL_MEM_
    `define ENABLE_INITIAL_MEM_
  `endif // not def ENABLE_INITIAL_MEM_
`endif // not def SYNTHESIS

module MatrixMultiplier(	// src/main/scala/MatrixMultiplier.scala:33:7
  input  clock,	// <stdin>:304:11
         reset,	// <stdin>:305:11
         io_start,	// src/main/scala/MatrixMultiplier.scala:39:14
  output io_done,	// src/main/scala/MatrixMultiplier.scala:39:14
         io_busy	// src/main/scala/MatrixMultiplier.scala:39:14
);

  reg [1:0] state;	// src/main/scala/MatrixMultiplier.scala:84:22
  reg [9:0] cycleCounter;	// src/main/scala/MatrixMultiplier.scala:88:29
  always @(posedge clock) begin	// <stdin>:304:11
    if (reset) begin	// <stdin>:304:11
      state <= 2'h0;	// src/main/scala/MatrixMultiplier.scala:84:22
      cycleCounter <= 10'h0;	// src/main/scala/MatrixMultiplier.scala:88:29
    end
    else if (state == 2'h0) begin	// src/main/scala/MatrixMultiplier.scala:84:22, :128:17
      if (io_start) begin	// src/main/scala/MatrixMultiplier.scala:39:14
        state <= 2'h1;	// src/main/scala/MatrixMultiplier.scala:84:22, :131:15
        cycleCounter <= 10'h0;	// src/main/scala/MatrixMultiplier.scala:88:29
      end
    end
    else if (state == 2'h1) begin	// src/main/scala/MatrixMultiplier.scala:84:22, :128:17, :131:15
      if (cycleCounter == 10'h1FF)	// src/main/scala/MatrixMultiplier.scala:88:29, :140:25
        state <= 2'h2;	// src/main/scala/MatrixMultiplier.scala:84:22, :142:15
      cycleCounter <= cycleCounter + 10'h1;	// src/main/scala/MatrixMultiplier.scala:88:29, :139:36
    end
    else if (state == 2'h2 & ~io_start)	// src/main/scala/MatrixMultiplier.scala:84:22, :128:17, :142:15, :147:{12,23}, :148:15
      state <= 2'h0;	// src/main/scala/MatrixMultiplier.scala:84:22
  end // always @(posedge)
  `ifdef ENABLE_INITIAL_REG_	// src/main/scala/MatrixMultiplier.scala:33:7
    `ifdef FIRRTL_BEFORE_INITIAL	// src/main/scala/MatrixMultiplier.scala:33:7
      `FIRRTL_BEFORE_INITIAL	// src/main/scala/MatrixMultiplier.scala:33:7
    `endif // FIRRTL_BEFORE_INITIAL
    initial begin	// src/main/scala/MatrixMultiplier.scala:33:7
      automatic logic [31:0] _RANDOM[0:0];	// src/main/scala/MatrixMultiplier.scala:33:7
      `ifdef INIT_RANDOM_PROLOG_	// src/main/scala/MatrixMultiplier.scala:33:7
        `INIT_RANDOM_PROLOG_	// src/main/scala/MatrixMultiplier.scala:33:7
      `endif // INIT_RANDOM_PROLOG_
      `ifdef RANDOMIZE_REG_INIT	// src/main/scala/MatrixMultiplier.scala:33:7
        _RANDOM[/*Zero width*/ 1'b0] = `RANDOM;	// src/main/scala/MatrixMultiplier.scala:33:7
        state = _RANDOM[/*Zero width*/ 1'b0][1:0];	// src/main/scala/MatrixMultiplier.scala:33:7, :84:22
        cycleCounter = _RANDOM[/*Zero width*/ 1'b0][11:2];	// src/main/scala/MatrixMultiplier.scala:33:7, :84:22, :88:29
      `endif // RANDOMIZE_REG_INIT
    end // initial
    `ifdef FIRRTL_AFTER_INITIAL	// src/main/scala/MatrixMultiplier.scala:33:7
      `FIRRTL_AFTER_INITIAL	// src/main/scala/MatrixMultiplier.scala:33:7
    `endif // FIRRTL_AFTER_INITIAL
  `endif // ENABLE_INITIAL_REG_
  assign io_done = state == 2'h2;	// src/main/scala/MatrixMultiplier.scala:33:7, :84:22, :142:15, :188:20
  assign io_busy = |state;	// src/main/scala/MatrixMultiplier.scala:33:7, :84:22, :187:20
endmodule

module SimpleScalableAiChip(	// src/main/scala/SimpleScalableDesign.scala:10:7
  input         clock,	// <stdin>:413:11
                reset,	// <stdin>:414:11
  input  [9:0]  io_axi_awaddr,	// src/main/scala/SimpleScalableDesign.scala:18:14
  input         io_axi_awvalid,	// src/main/scala/SimpleScalableDesign.scala:18:14
  output        io_axi_awready,	// src/main/scala/SimpleScalableDesign.scala:18:14
  input  [31:0] io_axi_wdata,	// src/main/scala/SimpleScalableDesign.scala:18:14
  input  [3:0]  io_axi_wstrb,	// src/main/scala/SimpleScalableDesign.scala:18:14
  input         io_axi_wvalid,	// src/main/scala/SimpleScalableDesign.scala:18:14
  output        io_axi_wready,	// src/main/scala/SimpleScalableDesign.scala:18:14
  output [1:0]  io_axi_bresp,	// src/main/scala/SimpleScalableDesign.scala:18:14
  output        io_axi_bvalid,	// src/main/scala/SimpleScalableDesign.scala:18:14
  input         io_axi_bready,	// src/main/scala/SimpleScalableDesign.scala:18:14
  input  [9:0]  io_axi_araddr,	// src/main/scala/SimpleScalableDesign.scala:18:14
  input         io_axi_arvalid,	// src/main/scala/SimpleScalableDesign.scala:18:14
  output        io_axi_arready,	// src/main/scala/SimpleScalableDesign.scala:18:14
  output [31:0] io_axi_rdata,	// src/main/scala/SimpleScalableDesign.scala:18:14
  output [1:0]  io_axi_rresp,	// src/main/scala/SimpleScalableDesign.scala:18:14
  output        io_axi_rvalid,	// src/main/scala/SimpleScalableDesign.scala:18:14
  input         io_axi_rready,	// src/main/scala/SimpleScalableDesign.scala:18:14
  output        io_status_busy,	// src/main/scala/SimpleScalableDesign.scala:18:14
                io_status_done,	// src/main/scala/SimpleScalableDesign.scala:18:14
                io_status_error,	// src/main/scala/SimpleScalableDesign.scala:18:14
  output [31:0] io_perf_counters_0,	// src/main/scala/SimpleScalableDesign.scala:18:14
                io_perf_counters_1,	// src/main/scala/SimpleScalableDesign.scala:18:14
                io_perf_counters_2,	// src/main/scala/SimpleScalableDesign.scala:18:14
                io_perf_counters_3,	// src/main/scala/SimpleScalableDesign.scala:18:14
                io_perf_counters_4,	// src/main/scala/SimpleScalableDesign.scala:18:14
                io_perf_counters_5,	// src/main/scala/SimpleScalableDesign.scala:18:14
                io_perf_counters_6,	// src/main/scala/SimpleScalableDesign.scala:18:14
                io_perf_counters_7	// src/main/scala/SimpleScalableDesign.scala:18:14
);

  wire        _matrixMult_io_done;	// src/main/scala/SimpleScalableDesign.scala:55:26
  wire        _matrixMult_io_busy;	// src/main/scala/SimpleScalableDesign.scala:55:26
  reg  [31:0] perfCounters_0;	// src/main/scala/SimpleScalableDesign.scala:63:41
  reg  [31:0] perfCounters_1;	// src/main/scala/SimpleScalableDesign.scala:63:41
  reg  [31:0] perfCounters_2;	// src/main/scala/SimpleScalableDesign.scala:63:41
  reg  [31:0] ctrlReg;	// src/main/scala/SimpleScalableDesign.scala:66:24
  reg  [31:0] statusReg;	// src/main/scala/SimpleScalableDesign.scala:67:26
  reg  [1:0]  axi_state;	// src/main/scala/SimpleScalableDesign.scala:71:26
  reg  [9:0]  write_addr_reg;	// src/main/scala/SimpleScalableDesign.scala:74:31
  reg  [31:0] write_data_reg;	// src/main/scala/SimpleScalableDesign.scala:75:31
  reg  [9:0]  read_addr_reg;	// src/main/scala/SimpleScalableDesign.scala:76:30
  reg  [31:0] read_data_reg;	// src/main/scala/SimpleScalableDesign.scala:77:30
  wire        write_transaction = io_axi_awvalid & io_axi_wvalid;	// src/main/scala/SimpleScalableDesign.scala:104:42
  reg         io_axi_bvalid_REG;	// src/main/scala/SimpleScalableDesign.scala:149:53
  wire        io_axi_bvalid_0 = (&axi_state) & io_axi_bvalid_REG;	// src/main/scala/SimpleScalableDesign.scala:71:26, :149:{30,43,53}
  reg         io_axi_rvalid_REG;	// src/main/scala/SimpleScalableDesign.scala:152:53
  wire        io_axi_rvalid_0 = (&axi_state) & io_axi_rvalid_REG;	// src/main/scala/SimpleScalableDesign.scala:71:26, :149:30, :152:{43,53}
  always @(posedge clock) begin	// <stdin>:413:11
    if (reset) begin	// <stdin>:413:11
      perfCounters_0 <= 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :63:41
      perfCounters_1 <= 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :63:41
      perfCounters_2 <= 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :63:41
      ctrlReg <= 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :66:24
      statusReg <= 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :67:26
      axi_state <= 2'h0;	// src/main/scala/SimpleScalableDesign.scala:71:26
      write_addr_reg <= 10'h0;	// src/main/scala/SimpleScalableDesign.scala:74:31
      write_data_reg <= 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :75:31
      read_addr_reg <= 10'h0;	// src/main/scala/SimpleScalableDesign.scala:74:31, :76:30
      read_data_reg <= 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :77:30
    end
    else begin	// <stdin>:413:11
      automatic logic _GEN;	// src/main/scala/SimpleScalableDesign.scala:107:21
      automatic logic _GEN_0;	// src/main/scala/SimpleScalableDesign.scala:107:21
      _GEN = axi_state == 2'h1;	// src/main/scala/SimpleScalableDesign.scala:71:26, :107:21, :110:19
      _GEN_0 = axi_state == 2'h2;	// src/main/scala/SimpleScalableDesign.scala:71:26, :107:21, :114:19
      if (_matrixMult_io_busy)	// src/main/scala/SimpleScalableDesign.scala:55:26
        perfCounters_0 <= perfCounters_0 + 32'h1;	// src/main/scala/SimpleScalableDesign.scala:63:41, :174:40
      if (_matrixMult_io_done)	// src/main/scala/SimpleScalableDesign.scala:55:26
        perfCounters_1 <= perfCounters_1 + 32'h1;	// src/main/scala/SimpleScalableDesign.scala:63:41, :174:40, :177:40
      perfCounters_2 <= perfCounters_2 + 32'h10;	// src/main/scala/SimpleScalableDesign.scala:63:41, :182:38
      if ((|axi_state) & _GEN & write_addr_reg == 10'h0)	// src/main/scala/SimpleScalableDesign.scala:66:24, :71:26, :74:31, :107:21, :121:27
        ctrlReg <= write_data_reg;	// src/main/scala/SimpleScalableDesign.scala:66:24, :75:31
      statusReg <= {30'h0, _matrixMult_io_done, _matrixMult_io_busy};	// src/main/scala/SimpleScalableDesign.scala:55:26, :67:26, :157:19
      if (|axi_state) begin	// src/main/scala/SimpleScalableDesign.scala:71:26, :107:21
        if (_GEN | _GEN_0)	// src/main/scala/SimpleScalableDesign.scala:107:21, :124:17, :134:17
          axi_state <= 2'h3;	// src/main/scala/SimpleScalableDesign.scala:71:26, :124:17
        else if ((&axi_state)
                 & (io_axi_bready & io_axi_bvalid_0 | io_axi_rready & io_axi_rvalid_0))	// src/main/scala/SimpleScalableDesign.scala:71:26, :107:21, :138:{27,45,63,82}, :139:19, :149:43, :152:43
          axi_state <= 2'h0;	// src/main/scala/SimpleScalableDesign.scala:71:26
      end
      else if (write_transaction)	// src/main/scala/SimpleScalableDesign.scala:104:42
        axi_state <= 2'h1;	// src/main/scala/SimpleScalableDesign.scala:71:26, :110:19
      else if (io_axi_arvalid)	// src/main/scala/SimpleScalableDesign.scala:18:14
        axi_state <= 2'h2;	// src/main/scala/SimpleScalableDesign.scala:71:26, :114:19
      if (~(|axi_state) & write_transaction) begin	// src/main/scala/SimpleScalableDesign.scala:71:26, :74:31, :104:42, :107:21, :109:31, :111:24
        write_addr_reg <= io_axi_awaddr;	// src/main/scala/SimpleScalableDesign.scala:74:31
        write_data_reg <= io_axi_wdata;	// src/main/scala/SimpleScalableDesign.scala:75:31
      end
      if ((|axi_state) | write_transaction | ~io_axi_arvalid) begin	// src/main/scala/SimpleScalableDesign.scala:71:26, :76:30, :104:42, :107:21, :109:31, :113:36
      end
      else	// src/main/scala/SimpleScalableDesign.scala:76:30, :107:21, :109:31
        read_addr_reg <= io_axi_araddr;	// src/main/scala/SimpleScalableDesign.scala:76:30
      if (~(|axi_state) | _GEN | ~_GEN_0) begin	// src/main/scala/SimpleScalableDesign.scala:71:26, :77:30, :107:21
      end
      else if (read_addr_reg == 10'h0)	// src/main/scala/SimpleScalableDesign.scala:74:31, :76:30, :129:26
        read_data_reg <= ctrlReg;	// src/main/scala/SimpleScalableDesign.scala:66:24, :77:30
      else if (read_addr_reg == 10'h4)	// src/main/scala/SimpleScalableDesign.scala:76:30, :131:32
        read_data_reg <= statusReg;	// src/main/scala/SimpleScalableDesign.scala:67:26, :77:30
    end
    io_axi_bvalid_REG <= axi_state == 2'h1;	// src/main/scala/SimpleScalableDesign.scala:71:26, :110:19, :149:{53,64}
    io_axi_rvalid_REG <= axi_state == 2'h2;	// src/main/scala/SimpleScalableDesign.scala:71:26, :114:19, :152:{53,64}
  end // always @(posedge)
  `ifdef ENABLE_INITIAL_REG_	// src/main/scala/SimpleScalableDesign.scala:10:7
    `ifdef FIRRTL_BEFORE_INITIAL	// src/main/scala/SimpleScalableDesign.scala:10:7
      `FIRRTL_BEFORE_INITIAL	// src/main/scala/SimpleScalableDesign.scala:10:7
    `endif // FIRRTL_BEFORE_INITIAL
    initial begin	// src/main/scala/SimpleScalableDesign.scala:10:7
      automatic logic [31:0] _RANDOM[0:12];	// src/main/scala/SimpleScalableDesign.scala:10:7
      `ifdef INIT_RANDOM_PROLOG_	// src/main/scala/SimpleScalableDesign.scala:10:7
        `INIT_RANDOM_PROLOG_	// src/main/scala/SimpleScalableDesign.scala:10:7
      `endif // INIT_RANDOM_PROLOG_
      `ifdef RANDOMIZE_REG_INIT	// src/main/scala/SimpleScalableDesign.scala:10:7
        for (logic [3:0] i = 4'h0; i < 4'hD; i += 4'h1) begin
          _RANDOM[i] = `RANDOM;	// src/main/scala/SimpleScalableDesign.scala:10:7
        end	// src/main/scala/SimpleScalableDesign.scala:10:7
        perfCounters_0 = _RANDOM[4'h0];	// src/main/scala/SimpleScalableDesign.scala:10:7, :63:41
        perfCounters_1 = _RANDOM[4'h1];	// src/main/scala/SimpleScalableDesign.scala:10:7, :63:41
        perfCounters_2 = _RANDOM[4'h2];	// src/main/scala/SimpleScalableDesign.scala:10:7, :63:41
        ctrlReg = _RANDOM[4'h8];	// src/main/scala/SimpleScalableDesign.scala:10:7, :66:24
        statusReg = _RANDOM[4'h9];	// src/main/scala/SimpleScalableDesign.scala:10:7, :67:26
        axi_state = _RANDOM[4'hA][1:0];	// src/main/scala/SimpleScalableDesign.scala:10:7, :71:26
        write_addr_reg = _RANDOM[4'hA][11:2];	// src/main/scala/SimpleScalableDesign.scala:10:7, :71:26, :74:31
        write_data_reg = {_RANDOM[4'hA][31:12], _RANDOM[4'hB][11:0]};	// src/main/scala/SimpleScalableDesign.scala:10:7, :71:26, :75:31
        read_addr_reg = _RANDOM[4'hB][21:12];	// src/main/scala/SimpleScalableDesign.scala:10:7, :75:31, :76:30
        read_data_reg = {_RANDOM[4'hB][31:22], _RANDOM[4'hC][21:0]};	// src/main/scala/SimpleScalableDesign.scala:10:7, :75:31, :77:30
        io_axi_bvalid_REG = _RANDOM[4'hC][22];	// src/main/scala/SimpleScalableDesign.scala:10:7, :77:30, :149:53
        io_axi_rvalid_REG = _RANDOM[4'hC][23];	// src/main/scala/SimpleScalableDesign.scala:10:7, :77:30, :152:53
      `endif // RANDOMIZE_REG_INIT
    end // initial
    `ifdef FIRRTL_AFTER_INITIAL	// src/main/scala/SimpleScalableDesign.scala:10:7
      `FIRRTL_AFTER_INITIAL	// src/main/scala/SimpleScalableDesign.scala:10:7
    `endif // FIRRTL_AFTER_INITIAL
  `endif // ENABLE_INITIAL_REG_
  MatrixMultiplier matrixMult (	// src/main/scala/SimpleScalableDesign.scala:55:26
    .clock    (clock),
    .reset    (reset),
    .io_start (ctrlReg[0]),	// src/main/scala/SimpleScalableDesign.scala:66:24, :87:33
    .io_done  (_matrixMult_io_done),
    .io_busy  (_matrixMult_io_busy)
  );
  assign io_axi_awready = ~(|axi_state);	// src/main/scala/SimpleScalableDesign.scala:10:7, :71:26, :107:21, :145:31
  assign io_axi_wready = ~(|axi_state);	// src/main/scala/SimpleScalableDesign.scala:10:7, :71:26, :107:21, :145:31
  assign io_axi_bresp = 2'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :71:26
  assign io_axi_bvalid = io_axi_bvalid_0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :149:43
  assign io_axi_arready = ~(|axi_state) & ~write_transaction;	// src/main/scala/SimpleScalableDesign.scala:10:7, :71:26, :104:42, :107:21, :145:31, :147:{44,47}
  assign io_axi_rdata = read_data_reg;	// src/main/scala/SimpleScalableDesign.scala:10:7, :77:30
  assign io_axi_rresp = 2'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :71:26
  assign io_axi_rvalid = io_axi_rvalid_0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :152:43
  assign io_status_busy = _matrixMult_io_busy;	// src/main/scala/SimpleScalableDesign.scala:10:7, :55:26
  assign io_status_done = _matrixMult_io_done;	// src/main/scala/SimpleScalableDesign.scala:10:7, :55:26
  assign io_status_error = 1'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :88:33
  assign io_perf_counters_0 = perfCounters_0;	// src/main/scala/SimpleScalableDesign.scala:10:7, :63:41
  assign io_perf_counters_1 = perfCounters_1;	// src/main/scala/SimpleScalableDesign.scala:10:7, :63:41
  assign io_perf_counters_2 = perfCounters_2;	// src/main/scala/SimpleScalableDesign.scala:10:7, :63:41
  assign io_perf_counters_3 = 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7
  assign io_perf_counters_4 = 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7
  assign io_perf_counters_5 = 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7
  assign io_perf_counters_6 = 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7
  assign io_perf_counters_7 = 32'h0;	// src/main/scala/SimpleScalableDesign.scala:10:7
endmodule

