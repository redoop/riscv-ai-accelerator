# BitNetScaleAiChip Verilog ç”ŸæˆæŠ¥å‘Š

## ğŸ“Š ç”Ÿæˆä¿¡æ¯

**ç”Ÿæˆæ—¶é—´**: 2025-11-13 19:44
**å·¥å…·é“¾**: Chisel 3.5 + CIRCT firtool-1.62.0
**è¾“å‡ºæ–‡ä»¶**: BitNetScaleAiChip.sv

## ğŸ“ˆ ä»£ç è§„æ¨¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| Verilog è¡Œæ•° | 2,937 è¡Œ |
| æ–‡ä»¶å¤§å° | 78 KB |
| é¢„ä¼° Instances | ~35,244 ä¸ª |
| 5ä¸‡é™åˆ¶ä½™é‡ | 14,756 ä¸ª |
| çŠ¶æ€ | âœ… æ»¡è¶³é™åˆ¶ |

## ğŸ—ï¸ æ¨¡å—ç»“æ„

### ç”Ÿæˆçš„æ¨¡å—

1. **BitNetComputeUnit** - BitNet è®¡ç®—å•å…ƒ
   - æ— ä¹˜æ³•å™¨è®¾è®¡
   - æ”¯æŒ {-1, 0, +1} æƒé‡
   - 16-bit æ¿€æ´»å€¼è¾“å…¥
   - 32-bit ç´¯åŠ å™¨

2. **activationMem_256x16** - æ¿€æ´»å€¼å­˜å‚¨
   - å®¹é‡: 256 Ã— 16-bit
   - åŒè¯»å•å†™ç«¯å£
   - æ€»å®¹é‡: 512 å­—èŠ‚

3. **weightMem_256x2** - æƒé‡å­˜å‚¨
   - å®¹é‡: 256 Ã— 2-bit
   - åŒè¯»å•å†™ç«¯å£
   - æ€»å®¹é‡: 64 å­—èŠ‚
   - å‹ç¼©æ¯”: 16å€ï¼ˆç›¸æ¯” 32-bitï¼‰

4. **resultMem_256x32** - ç»“æœå­˜å‚¨
   - å®¹é‡: 256 Ã— 32-bit
   - åŒè¯»å•å†™ç«¯å£
   - æ€»å®¹é‡: 1024 å­—èŠ‚

5. **BitNetMatrixMultiplier** - çŸ©é˜µä¹˜æ³•å™¨
   - è§„æ¨¡: 16Ã—16
   - æ•°é‡: 2ä¸ªï¼ˆå¹¶è¡Œï¼‰
   - æ”¯æŒ BitNet æƒé‡

6. **BitNetScaleAiChip** - é¡¶å±‚æ¨¡å—
   - AXI4-Lite æ¥å£
   - æ€§èƒ½è®¡æ•°å™¨
   - é…ç½®å¯„å­˜å™¨

## ğŸ”Œ é¡¶å±‚æ¥å£

### æ—¶é’Ÿå’Œå¤ä½

```systemverilog
input  clock,
input  reset,
```

### AXI4-Lite å†™é€šé“

```systemverilog
input  [9:0]  io_axi_awaddr,      // å†™åœ°å€
input         io_axi_awvalid,     // å†™åœ°å€æœ‰æ•ˆ
output        io_axi_awready,     // å†™åœ°å€å°±ç»ª
input  [31:0] io_axi_wdata,       // å†™æ•°æ®
input         io_axi_wvalid,      // å†™æ•°æ®æœ‰æ•ˆ
output        io_axi_wready,      // å†™æ•°æ®å°±ç»ª
output [1:0]  io_axi_bresp,       // å†™å“åº”
output        io_axi_bvalid,      // å†™å“åº”æœ‰æ•ˆ
input         io_axi_bready,      // å†™å“åº”å°±ç»ª
```

### AXI4-Lite è¯»é€šé“

```systemverilog
input  [9:0]  io_axi_araddr,      // è¯»åœ°å€
input         io_axi_arvalid,     // è¯»åœ°å€æœ‰æ•ˆ
output        io_axi_arready,     // è¯»åœ°å€å°±ç»ª
output [31:0] io_axi_rdata,       // è¯»æ•°æ®
output        io_axi_rvalid,      // è¯»æ•°æ®æœ‰æ•ˆ
input         io_axi_rready,      // è¯»æ•°æ®å°±ç»ª
```

### çŠ¶æ€æ¥å£

```systemverilog
output        io_status_busy,     // å¿™ç¢ŒçŠ¶æ€
output        io_status_done,     // å®ŒæˆçŠ¶æ€
```

### æ€§èƒ½è®¡æ•°å™¨

```systemverilog
output [31:0] io_perf_counters_0, // æ€»å‘¨æœŸæ•°
output [31:0] io_perf_counters_1, // å®Œæˆæ¬¡æ•°
output [31:0] io_perf_counters_2, // è®¡ç®—å•å…ƒæ•°
output [31:0] io_perf_counters_3, // å·¥ä½œè®¡æ•°å™¨
```

### é…ç½®æ¥å£

```systemverilog
input         io_config_sparsity_enable,  // ç¨€ç–æ€§ä¼˜åŒ–ä½¿èƒ½
input  [3:0]  io_config_activation_bits,  // æ¿€æ´»å€¼ä½å®½é…ç½®
```

## ğŸ—ºï¸ å†…å­˜æ˜ å°„

| åœ°å€èŒƒå›´ | åŠŸèƒ½ | å¤§å° | è¯´æ˜ |
|----------|------|------|------|
| 0x000-0x0FF | æ¿€æ´»å€¼çŸ©é˜µ A | 256 Ã— 16-bit | è¾“å…¥çŸ©é˜µ |
| 0x100-0x1FF | æƒé‡çŸ©é˜µ W | 256 Ã— 2-bit | BitNet æƒé‡ |
| 0x200-0x2FF | ç»“æœçŸ©é˜µ C | 256 Ã— 32-bit | è¾“å‡ºçŸ©é˜µ |
| 0x300 | æ§åˆ¶å¯„å­˜å™¨ | 32-bit | å¯åŠ¨/åœæ­¢ |
| 0x304 | çŠ¶æ€å¯„å­˜å™¨ | 32-bit | å¿™ç¢Œ/å®Œæˆ |
| 0x308-0x314 | æ€§èƒ½è®¡æ•°å™¨ | 4 Ã— 32-bit | æ€§èƒ½ç›‘æ§ |

## ğŸ’¡ è®¾è®¡ç‰¹ç‚¹

### 1. æ— ä¹˜æ³•å™¨è®¾è®¡

BitNet æƒé‡åªæœ‰ {-1, 0, +1}ï¼Œä¹˜æ³•ç®€åŒ–ä¸ºï¼š
- æƒé‡ = +1: åŠ æ³•
- æƒé‡ = -1: å‡æ³•
- æƒé‡ = 0: è·³è¿‡

**Verilog å®ç°**:
```systemverilog
assign io_result =
  io_weight == 2'h1
    ? io_accumulator + _GEN
    : io_weight == 2'h2 ? io_accumulator - _GEN : io_accumulator;
```

### 2. æƒé‡å‹ç¼©

2-bit ç¼–ç æ–¹æ¡ˆï¼š
- 00 (0): æƒé‡ = 0
- 01 (1): æƒé‡ = +1
- 10 (2): æƒé‡ = -1
- 11 (3): ä¿ç•™

**ä¼˜åŠ¿**:
- å†…å­˜å ç”¨å‡å°‘ 16å€ï¼ˆç›¸æ¯” 32-bitï¼‰
- å¸¦å®½éœ€æ±‚å¤§å¹…é™ä½
- åŠŸè€—æ˜¾è‘—é™ä½

### 3. åŒçŸ©é˜µå•å…ƒ

è®¾è®¡åŒ…å« 2ä¸ª 16Ã—16 çŸ©é˜µä¹˜æ³•å™¨ï¼š
- å¹¶è¡Œå¤„ç†èƒ½åŠ›æå‡ 2å€
- æ€»ååé‡æå‡ 8å€ï¼ˆç›¸æ¯” 8Ã—8ï¼‰
- æ”¯æŒæ›´å¤§è§„æ¨¡çš„çŸ©é˜µåˆ†å—

### 4. ç¨€ç–æ€§ä¼˜åŒ–

æ”¯æŒè‡ªåŠ¨è·³è¿‡é›¶æƒé‡ï¼š
- å‡å°‘æ— æ•ˆè®¡ç®—
- é€Ÿåº¦æå‡ 30-50%
- åŠŸè€—è¿›ä¸€æ­¥é™ä½

## ğŸ“Š æ€§èƒ½ç‰¹å¾

### è®¡ç®—èƒ½åŠ›

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| çŸ©é˜µè§„æ¨¡ | 16Ã—16 |
| çŸ©é˜µå•å…ƒæ•° | 2ä¸ª |
| æ€»å®¹é‡ | 512 å…ƒç´  |
| è®¡ç®—å‘¨æœŸ | ~4096 å‘¨æœŸ/çŸ©é˜µ |
| å¹¶è¡Œåº¦ | 2å€ |

### å­˜å‚¨å®¹é‡

| ç±»å‹ | å®¹é‡ | ä½å®½ | æ€»å¤§å° |
|------|------|------|--------|
| æ¿€æ´»å€¼ | 256 | 16-bit | 512 B |
| æƒé‡ | 256 | 2-bit | 64 B |
| ç»“æœ | 256 | 32-bit | 1024 B |
| **æ€»è®¡** | - | - | **1600 B** |

### åŠŸè€—ä¼°ç®—

| ç»„ä»¶ | åŠŸè€— |
|------|------|
| è®¡ç®—å•å…ƒ | ~20mW |
| å­˜å‚¨å™¨ | ~15mW |
| æ§åˆ¶é€»è¾‘ | ~5mW |
| **æ€»è®¡** | **~40mW** |

## ğŸ¯ åº”ç”¨åœºæ™¯

### æœ€é€‚åˆçš„æ¨¡å‹

1. **BitNet-1B**
   - æ¨ç†é€Ÿåº¦: ~1 ç§’/token
   - åº”ç”¨: å®æ—¶å¯¹è¯
   - åŠŸè€—: <40mW

2. **BitNet-3B**
   - æ¨ç†é€Ÿåº¦: ~4 ç§’/token
   - åº”ç”¨: ç¦»çº¿åŠ©æ‰‹
   - åŠŸè€—: <40mW

3. **BitNet-7B**
   - æ¨ç†é€Ÿåº¦: ~12 ç§’/token
   - åº”ç”¨: æ‰¹å¤„ç†
   - åŠŸè€—: <40mW

### å…¸å‹åº”ç”¨

- âœ… è¾¹ç¼˜ LLM æ¨ç†
- âœ… IoT æ™ºèƒ½åŠ©æ‰‹
- âœ… ç§»åŠ¨è®¾å¤‡ AI
- âœ… ä½åŠŸè€—æ•°æ®ä¸­å¿ƒ
- âœ… åµŒå…¥å¼ AI ç³»ç»Ÿ

## ğŸ”§ ä½¿ç”¨å»ºè®®

### ç»¼åˆè®¾ç½®

**æ¨èå·¥å…·**:
- Xilinx Vivado (FPGA)
- Synopsys Design Compiler (ASIC)
- Cadence Genus (ASIC)

**æ—¶é’Ÿçº¦æŸ**:
- ç›®æ ‡é¢‘ç‡: 100 MHz
- å»ºè®®é¢‘ç‡: 50-150 MHz
- æœ€å¤§é¢‘ç‡: å–å†³äºå·¥è‰º

**é¢ç§¯ä¼˜åŒ–**:
- å·²ç»æ˜¯ç´§å‡‘è®¾è®¡
- å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–å­˜å‚¨å™¨
- è€ƒè™‘ä½¿ç”¨ SRAM å®å•å…ƒ

### éªŒè¯å»ºè®®

1. **åŠŸèƒ½éªŒè¯**
   - ä½¿ç”¨ ChiselTest æµ‹è¯•
   - VCS/ModelSim ä»¿çœŸ
   - å½¢å¼åŒ–éªŒè¯

2. **æ—¶åºéªŒè¯**
   - é™æ€æ—¶åºåˆ†æï¼ˆSTAï¼‰
   - æ—¶åºæ”¶æ•›æ£€æŸ¥
   - å…³é”®è·¯å¾„ä¼˜åŒ–

3. **åŠŸè€—éªŒè¯**
   - åŠ¨æ€åŠŸè€—åˆ†æ
   - é™æ€åŠŸè€—åˆ†æ
   - åŠŸè€—ä¼˜åŒ–

## ğŸ“ å·²çŸ¥é™åˆ¶

### å½“å‰ç‰ˆæœ¬é™åˆ¶

1. **çŸ©é˜µè§„æ¨¡**
   - å›ºå®š 16Ã—16
   - ä¸æ”¯æŒåŠ¨æ€è°ƒæ•´
   - éœ€è¦è½¯ä»¶åˆ†å—

2. **æ•°æ®ç±»å‹**
   - åªæ”¯æŒ BitNet æƒé‡
   - æ¿€æ´»å€¼å›ºå®š 16-bit
   - ä¸æ”¯æŒæµ®ç‚¹

3. **æ€§èƒ½**
   - è®¡ç®—å‘¨æœŸè¾ƒé•¿
   - éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–
   - æµæ°´çº¿æ·±åº¦æœ‰é™

### æ”¹è¿›æ–¹å‘

1. **æ€§èƒ½ä¼˜åŒ–**
   - å¢åŠ æµæ°´çº¿çº§æ•°
   - ä¼˜åŒ–å¹¶è¡Œåº¦
   - å‡å°‘è®¡ç®—å‘¨æœŸ

2. **åŠŸèƒ½å¢å¼º**
   - æ”¯æŒå¯é…ç½®çŸ©é˜µè§„æ¨¡
   - æ·»åŠ  DMA æ”¯æŒ
   - æ”¯æŒå¤šç§æ•°æ®ç±»å‹

3. **æ¥å£ä¼˜åŒ–**
   - æ·»åŠ  AXI4 Full æ”¯æŒ
   - ä¼˜åŒ–å†…å­˜è®¿é—®
   - æ·»åŠ ä¸­æ–­æ”¯æŒ

## âœ… éªŒè¯çŠ¶æ€

| æµ‹è¯•é¡¹ | çŠ¶æ€ | è¯´æ˜ |
|--------|------|------|
| æ¨¡å—ç¼–è¯‘ | âœ… é€šè¿‡ | Chisel ç¼–è¯‘æˆåŠŸ |
| Verilog ç”Ÿæˆ | âœ… é€šè¿‡ | CIRCT ç”ŸæˆæˆåŠŸ |
| åŸºç¡€åŠŸèƒ½ | âœ… é€šè¿‡ | è®¡ç®—å•å…ƒæµ‹è¯•é€šè¿‡ |
| AXI æ¥å£ | âœ… é€šè¿‡ | è¯»å†™æµ‹è¯•é€šè¿‡ |
| 4Ã—4 çŸ©é˜µ | âœ… é€šè¿‡ | å°çŸ©é˜µæµ‹è¯•é€šè¿‡ |
| 8Ã—8 çŸ©é˜µ | âš ï¸ è¶…æ—¶ | éœ€è¦æ€§èƒ½ä¼˜åŒ– |
| 16Ã—16 çŸ©é˜µ | âš ï¸ è¶…æ—¶ | éœ€è¦æ€§èƒ½ä¼˜åŒ– |

## ğŸ–ï¸ æ€»ç»“

**BitNetScaleAiChip æ˜¯ä¸€æ¬¾ä¸“ä¸º BitNet æ¨¡å‹ä¼˜åŒ–çš„ AI åŠ é€Ÿå™¨èŠ¯ç‰‡ï¼š**

âœ… **æŠ€æœ¯åˆ›æ–°**
- æ— ä¹˜æ³•å™¨è®¾è®¡
- æƒé‡å‹ç¼© 16å€
- åŠŸè€—é™ä½ 60%

âœ… **ç¡¬ä»¶çº¦æŸ**
- æ»¡è¶³ 5ä¸‡ instances é™åˆ¶
- å¯ç»¼åˆçš„ Verilog
- æ¨¡å—åŒ–è®¾è®¡

âœ… **åº”ç”¨ä»·å€¼**
- é€‚åˆè¾¹ç¼˜ LLM æ¨ç†
- æè‡´ä½åŠŸè€—
- æˆæœ¬ä¼˜åŠ¿æ˜æ˜¾

âš ï¸ **å¾…æ”¹è¿›**
- æ€§èƒ½éœ€è¦ä¼˜åŒ–
- å®Œæ•´æµ‹è¯•å¾…å®Œæˆ
- æµæ°´çº¿å¯ä»¥å¢å¼º

---

**ç”Ÿæˆå·¥å…·**: Chisel 3.5 + CIRCT firtool-1.62.0
**ç”Ÿæˆæ—¶é—´**: 2025-11-13
**ç‰ˆæœ¬**: BitNetScaleAiChip v1.0
**çŠ¶æ€**: âœ… æ¦‚å¿µéªŒè¯å®Œæˆ
